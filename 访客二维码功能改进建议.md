# å››ä¸ªè§’è‰²åŒºåˆ†æ–¹æ¡ˆ - å®Œæ•´åˆ†æä¸å®æ–½æŒ‡å—

## ğŸ“‹ é¡¹ç›®èƒŒæ™¯

### å½“å‰ç³»ç»Ÿçš„å››ä¸ªè§’è‰²
1. **ä¸šä¸»** - ç³»ç»Ÿæ³¨å†Œç”¨æˆ·ï¼Œæ‹¥æœ‰æˆ¿äº§ä¿¡æ¯ï¼Œé€šè¿‡å¤æ‚çš„äº”å±‚æŸ¥è¯¢éªŒè¯
2. **ç®¡å®¶** - ç‰©ä¸šç®¡ç†äººå‘˜ï¼Œè´Ÿè´£å°åŒºç®¡ç†ï¼Œé€šè¿‡ä¸“ç”¨äºŒç»´ç éªŒè¯èº«ä»½
3. **å·¡é€»å‘˜** - å®‰ä¿äººå‘˜ï¼Œè´Ÿè´£å·¡é€»æ£€æŸ¥ï¼Œé€šè¿‡ä¸“ç”¨äºŒç»´ç éªŒè¯èº«ä»½
4. **è®¿å®¢** - ä¸´æ—¶è®¿é—®è€…ï¼Œé€šè¿‡ç®¡å®¶ç”Ÿæˆçš„é‚€è¯·äºŒç»´ç è¿›å…¥ç³»ç»Ÿ

### ç°çŠ¶åˆ†æ
- **ç®¡å®¶å’Œå·¡é€»å‘˜**ï¼šå·²æœ‰applyKindå‚æ•°ï¼ˆ3å’Œ4ï¼‰ï¼Œä½†å°ç¨‹åºç«¯æœªå……åˆ†åˆ©ç”¨
- **è®¿å®¢**ï¼šä½¿ç”¨type='visitor_invite'å‚æ•°ï¼Œæ²¡æœ‰applyKind
- **ä¸šä¸»**ï¼šé€šè¿‡å¤æ‚çš„äº”å±‚æ•°æ®åº“æŸ¥è¯¢æœºåˆ¶éªŒè¯

## ğŸ¯ æ ¸å¿ƒé—®é¢˜ä¸è§£å†³æ€è·¯

### æ ¸å¿ƒé—®é¢˜
1. **è§’è‰²åˆ¤æ–­å¤æ‚**ï¼šå½“å‰ä¾èµ–å¤šé‡éªŒè¯ï¼Œç”¨æˆ·ä½“éªŒä¸ä½³
2. **å‚æ•°ä¸ç»Ÿä¸€**ï¼šç®¡å®¶/å·¡é€»å‘˜æœ‰applyKindï¼Œè®¿å®¢ä½¿ç”¨typeå‚æ•°
3. **éªŒè¯é€»è¾‘åˆ†æ•£**ï¼šä¸åŒè§’è‰²çš„éªŒè¯é€»è¾‘æ•£å¸ƒåœ¨å¤šä¸ªæ–‡ä»¶ä¸­
4. **æ‰©å±•æ€§å·®**ï¼šæ–°å¢è§’è‰²éœ€è¦ä¿®æ”¹å¤šå¤„ä»£ç 

### è§£å†³æ€è·¯
1. **ç»Ÿä¸€å‚æ•°ä½“ç³»**ï¼šæ‰€æœ‰è§’è‰²éƒ½ä½¿ç”¨applyKindå‚æ•°æ ‡è¯†
2. **ç®€åŒ–éªŒè¯æµç¨‹**ï¼šäºŒç»´ç æ‰«ææ—¶ç›´æ¥ç¡®å®šè§’è‰²æ„å›¾
3. **ä¿æŒå‘åå…¼å®¹**ï¼šä¸ç ´åç°æœ‰åŠŸèƒ½ï¼Œæ¸è¿›å¼æ”¹è¿›

## ğŸ” è¯¦ç»†ç°çŠ¶åˆ†æ

### ç®¡å®¶äºŒç»´ç ï¼ˆButler.vueï¼‰
```javascript
// å½“å‰ç”Ÿæˆçš„URLæ ¼å¼
const managerQrUrl = "https://csharphrb.picp.vip/verify/butler/&applyKind=3&butlerId=123&time=1691234567";

// å‚æ•°è¯´æ˜ï¼š
// - applyKind=3: æ˜ç¡®æ ‡è¯†ä¸ºç®¡å®¶èº«ä»½éªŒè¯
// - butlerId: å…·ä½“çš„ç®¡å®¶IDï¼Œç”¨äºéªŒè¯å½“å‰ç”¨æˆ·æ˜¯å¦ä¸ºè¯¥ç®¡å®¶
// - time: æ—¶é—´æˆ³ï¼Œç”¨äºäºŒç»´ç æœ‰æ•ˆæœŸæ§åˆ¶
```

### å·¡é€»å‘˜äºŒç»´ç ï¼ˆPatrol.vueï¼‰
```javascript
// å½“å‰ç”Ÿæˆçš„URLæ ¼å¼
const patrolQrUrl = "https://www.xuerparking.cn:8543/verify/patrol/&applyKind=4&patrolId=456&time=1691234567";

// å‚æ•°è¯´æ˜ï¼š
// - applyKind=4: æ˜ç¡®æ ‡è¯†ä¸ºå·¡é€»å‘˜èº«ä»½éªŒè¯
// - patrolId: å…·ä½“çš„å·¡é€»å‘˜IDï¼Œç”¨äºéªŒè¯å½“å‰ç”¨æˆ·æ˜¯å¦ä¸ºè¯¥å·¡é€»å‘˜
// - time: æ—¶é—´æˆ³ï¼Œç”¨äºäºŒç»´ç æœ‰æ•ˆæœŸæ§åˆ¶
```

### è®¿å®¢é‚€è¯·äºŒç»´ç ï¼ˆqrcode-generator.vueï¼‰
```javascript
// å½“å‰ç”Ÿæˆçš„URLæ ¼å¼
const visitorParams = {
    qrId: 'QR_1691234567_1234_ABC',
    butlerName: 'å¼ ç®¡å®¶',
    butlerPhone: '13800138000',
    fullAddress: 'æŸæŸå°åŒº1æ ‹1å•å…ƒ101å®¤',
    province: 'å¹¿ä¸œçœ',
    city: 'æ·±åœ³å¸‚',
    // ... è¯¦ç»†åœ°å€ä¿¡æ¯
    type: 'visitor_invite', // å½“å‰ä½¿ç”¨typeå‚æ•°æ ‡è¯†
    timestamp: 1691234567
};

// é—®é¢˜ï¼šæ²¡æœ‰applyKindå‚æ•°ï¼Œä¸ç®¡å®¶/å·¡é€»å‘˜ä¸ç»Ÿä¸€
```

### ä¸šä¸»èº«ä»½éªŒè¯ï¼ˆäº”å±‚æŸ¥è¯¢æœºåˆ¶ï¼‰
```java
// WeChatAuthController.determineUserRole() - å¤æ‚çš„äº”å±‚æŸ¥è¯¢
private Map<String, Object> determineUserRole(String phoneNumber, String openid, String unionid, String parkName) {

    // ç¬¬ä¸€å±‚ï¼šButlerè¡¨æŸ¥è¯¢ - æ‰‹æœºå·åŒ¹é…
    // ç¬¬äºŒå±‚ï¼šOwnerinfoè¡¨æŸ¥è¯¢ - æ‰‹æœºå·åŒ¹é…
    // ç¬¬ä¸‰å±‚ï¼šå¤–éƒ¨APIæŸ¥è¯¢ - æ‰‹æœºå·åŒ¹é…ï¼Œè°ƒç”¨åœè½¦åœºæœˆç¥¨ç³»ç»Ÿ
    // ç¬¬å››å±‚ï¼šVisitorApplicationè¡¨æŸ¥è¯¢ - æš‚æ—¶è·³è¿‡
    // ç¬¬äº”å±‚ï¼šMemberè¡¨æŸ¥è¯¢ - openid+æ‰‹æœºå·åŒé‡éªŒè¯

    // å¤–éƒ¨APIæŸ¥è¯¢åŒ…å«ï¼š
    // - å¤šåœè½¦åœºå¹¶è¡ŒæŸ¥è¯¢
    // - åˆ†é¡µå¤„ç†ï¼ˆæ¯é¡µ100æ¡ï¼‰
    // - ç¼“å­˜æœºåˆ¶ä¼˜åŒ–
    // - å¼‚å¸¸å¤„ç†å’Œé™çº§
}
```

## ğŸ’¡ è§£å†³æ–¹æ¡ˆè®¾è®¡

### æ–¹æ¡ˆä¸€ï¼šç»Ÿä¸€applyKindå‚æ•°ä½“ç³»ï¼ˆæ¨èï¼‰

#### æ ¸å¿ƒæ€è·¯
**ä¸ºè®¿å®¢é‚€è¯·äºŒç»´ç æ·»åŠ applyKind=2å‚æ•°ï¼Œå®ç°å››ä¸ªè§’è‰²çš„ç»Ÿä¸€æ ‡è¯†**

```javascript
// ä¿®æ”¹åçš„è®¿å®¢é‚€è¯·äºŒç»´ç å‚æ•°
const visitorParams = {
    qrId: 'QR_1691234567_1234_ABC',
    applyKind: '2', // ğŸ†• æ–°å¢ç»Ÿä¸€æ ‡è¯†å‚æ•°
    butlerName: 'å¼ ç®¡å®¶',
    butlerPhone: '13800138000',
    fullAddress: 'æŸæŸå°åŒº1æ ‹1å•å…ƒ101å®¤',
    // ... å…¶ä»–å‚æ•°ä¿æŒä¸å˜
    type: 'visitor_invite', // ä¿ç•™ç°æœ‰å‚æ•°ï¼Œç¡®ä¿å‘åå…¼å®¹
    timestamp: 1691234567
};

// ç»Ÿä¸€çš„è§’è‰²è¯†åˆ«é€»è¾‘
function identifyUserRole(scanParams) {
    // ä¼˜å…ˆæ£€æŸ¥applyKindå‚æ•°
    if (scanParams.applyKind) {
        switch (scanParams.applyKind) {
            case '2': return 'visitor';    // è®¿å®¢é‚€è¯·
            case '3': return 'manager';    // ç®¡å®¶èº«ä»½éªŒè¯
            case '4': return 'patrol';     // å·¡é€»å‘˜èº«ä»½éªŒè¯
        }
    }

    // é™çº§å¤„ç†ï¼šæ£€æŸ¥ç°æœ‰å‚æ•°
    if (scanParams.type === 'visitor_invite') return 'visitor';

    // æ— äºŒç»´ç å‚æ•°æ—¶ï¼Œä½¿ç”¨ä¼ ç»Ÿäº”å±‚æ•°æ®åº“æŸ¥è¯¢
    return determineRoleByDatabase(userPhone, openid);
}
```

#### å®ç°æ­¥éª¤
1. **å‰ç«¯ä¿®æ”¹**ï¼šåœ¨qrcode-generator.vueä¸­æ·»åŠ applyKind=2å‚æ•°
2. **åç«¯å…¼å®¹**ï¼šæ”¯æŒapplyKindå’Œtypeä¸¤ç§å‚æ•°çš„è¯†åˆ«
3. **å°ç¨‹åºä¼˜åŒ–**ï¼šåœ¨å…¥å£é¡µé¢æ·»åŠ ç»Ÿä¸€çš„è§’è‰²è¯†åˆ«é€»è¾‘

### æ–¹æ¡ˆäºŒï¼šä¿æŒç°çŠ¶ï¼ŒåŸºäºå‚æ•°ç‰¹å¾åŒºåˆ†

#### ä¸æ·»åŠ applyKindçš„åŒºåˆ†æ–¹å¼
```javascript
// åŸºäºç°æœ‰å‚æ•°çš„åŒºåˆ†é€»è¾‘
function identifyQrCodeRole(url, params) {
    // 1. ä¼˜å…ˆæ£€æŸ¥applyKindå‚æ•°ï¼ˆç®¡å®¶å’Œå·¡é€»å‘˜ï¼‰
    if (params.applyKind) {
        switch (params.applyKind) {
            case '3': return 'manager';
            case '4': return 'patrol';
        }
    }

    // 2. æ£€æŸ¥è®¿å®¢ç‰¹å¾å‚æ•°
    if (params.type === 'visitor_invite' ||
        (params.qrId && params.butlerName && params.fullAddress)) {
        return 'visitor';
    }

    // 3. åŸºäºURLåŸŸååˆ¤æ–­ï¼ˆé™çº§æ–¹æ¡ˆï¼‰
    if (url.includes('/verify/butler/')) return 'manager';
    if (url.includes('/verify/patrol/')) return 'patrol';

    // 4. æ— äºŒç»´ç å‚æ•°ï¼Œèµ°ä¸šä¸»æŸ¥è¯¢æµç¨‹
    return 'owner';
}
```

#### ç°æœ‰ä¸šä¸»æŸ¥è¯¢æœºåˆ¶ï¼ˆä¿æŒä¸å˜ï¼‰
```java
// äº”å±‚æŸ¥è¯¢ä¼˜å…ˆçº§ - å¤æ‚ä½†å®Œå–„çš„ä¸šä¸»éªŒè¯
private Map<String, Object> determineUserRole(String phoneNumber, String openid, String unionid, String parkName) {

    // ç¬¬ä¸€å±‚ï¼šButlerè¡¨æŸ¥è¯¢ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
    // ç¬¬äºŒå±‚ï¼šOwnerinfoè¡¨æŸ¥è¯¢ï¼ˆæœ¬åœ°æ•°æ®ï¼‰
    // ç¬¬ä¸‰å±‚ï¼šå¤–éƒ¨APIæŸ¥è¯¢ï¼ˆåœè½¦åœºæœˆç¥¨ç³»ç»Ÿï¼‰
    //   - æ”¯æŒå¤šåœè½¦åœºå¹¶è¡ŒæŸ¥è¯¢
    //   - åˆ†é¡µå¤„ç†ï¼ˆæ¯é¡µ100æ¡è®°å½•ï¼‰
    //   - ç¼“å­˜æœºåˆ¶ä¼˜åŒ–æ€§èƒ½
    //   - å¼‚å¸¸å¤„ç†å’Œé™çº§ç­–ç•¥
    // ç¬¬å››å±‚ï¼šVisitorApplicationè¡¨æŸ¥è¯¢ï¼ˆå¾…å®Œå–„ï¼‰
    // ç¬¬äº”å±‚ï¼šMemberè¡¨æŸ¥è¯¢ï¼ˆè®¿å®¢è®°å½•ï¼‰

    // ä¸šä¸»æŸ¥è¯¢çš„å¤æ‚æ€§ä½“ç°åœ¨å¤–éƒ¨APIè°ƒç”¨
    boolean isOwnerFromAPI = ownerRoleVerificationService.isOwnerByPark(phoneNumber, parkName);
}
```

## ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”åˆ†æ

### æ–¹æ¡ˆå¯¹æ¯”è¡¨

| ç‰¹æ€§ | æ–¹æ¡ˆä¸€ï¼šç»Ÿä¸€applyKind | æ–¹æ¡ˆäºŒï¼šä¿æŒç°çŠ¶ |
|------|---------------------|-----------------|
| **å®ç°å¤æ‚åº¦** | â­â­ ç®€å• | â­â­â­ ä¸­ç­‰ |
| **ç»´æŠ¤æˆæœ¬** | â­â­â­â­â­ å¾ˆä½ | â­â­â­ ä¸­ç­‰ |
| **æ‰©å±•æ€§** | â­â­â­â­â­ ä¼˜ç§€ | â­â­ è¾ƒå·® |
| **å‘åå…¼å®¹** | â­â­â­â­â­ å®Œå…¨å…¼å®¹ | â­â­â­â­â­ æ— éœ€æ”¹åŠ¨ |
| **ä»£ç ç»Ÿä¸€æ€§** | â­â­â­â­â­ é«˜åº¦ç»Ÿä¸€ | â­â­ åˆ†æ•£å¤„ç† |
| **é”™è¯¯å¤„ç†** | â­â­â­â­ é›†ä¸­å¤„ç† | â­â­â­ åˆ†æ•£å¤„ç† |

### åŒºåˆ†èƒ½åŠ›å¯¹æ¯”

| è§’è‰² | æ–¹æ¡ˆä¸€è¯†åˆ«æ–¹å¼ | æ–¹æ¡ˆäºŒè¯†åˆ«æ–¹å¼ | å¯é æ€§ |
|------|---------------|---------------|--------|
| **è®¿å®¢** | applyKind=2 | type='visitor_invite' + å‚æ•°ç‰¹å¾ | ä¸¤è€…éƒ½å¯é  |
| **ç®¡å®¶** | applyKind=3 | applyKind=3 + URLåŸŸå | æ–¹æ¡ˆä¸€æ›´ç®€æ´ |
| **å·¡é€»å‘˜** | applyKind=4 | applyKind=4 + URLåŸŸå | æ–¹æ¡ˆä¸€æ›´ç®€æ´ |
| **ä¸šä¸»** | äº”å±‚æ•°æ®åº“æŸ¥è¯¢ | äº”å±‚æ•°æ®åº“æŸ¥è¯¢ | å®Œå…¨ç›¸åŒ |

## ğŸ¯ æœ€ç»ˆæ¨èæ–¹æ¡ˆ

### æ¨èï¼šæ–¹æ¡ˆä¸€ï¼ˆç»Ÿä¸€applyKindå‚æ•°ä½“ç³»ï¼‰

#### æ ¸å¿ƒä¼˜åŠ¿
1. **å‚æ•°ä½“ç³»ç»Ÿä¸€**ï¼šæ‰€æœ‰è§’è‰²éƒ½ä½¿ç”¨applyKindæ ‡è¯†ï¼Œé€»è¾‘æ¸…æ™°
2. **å®ç°ç®€å•**ï¼šåªéœ€åœ¨è®¿å®¢äºŒç»´ç ä¸­æ·»åŠ ä¸€ä¸ªå‚æ•°
3. **å‘åå…¼å®¹**ï¼šä¿ç•™ç°æœ‰typeå‚æ•°ï¼Œç¡®ä¿å…¼å®¹æ€§
4. **æ‰©å±•æ€§å¼º**ï¼šæ–°å¢è§’è‰²åªéœ€åˆ†é…æ–°çš„applyKindå€¼
5. **ç»´æŠ¤æˆæœ¬ä½**ï¼šç»Ÿä¸€çš„è¯†åˆ«é€»è¾‘ï¼Œå‡å°‘ä»£ç é‡å¤

#### å®æ–½å½±å“
- **å‰ç«¯æ”¹åŠ¨**ï¼šä»…éœ€ä¿®æ”¹qrcode-generator.vueä¸€ä¸ªæ–‡ä»¶
- **åç«¯æ”¹åŠ¨**ï¼šæ·»åŠ applyKindå‚æ•°æ”¯æŒï¼Œä¿æŒç°æœ‰é€»è¾‘
- **ç”¨æˆ·ä½“éªŒ**ï¼šæ— æ„ŸçŸ¥æ”¹åŠ¨ï¼ŒåŠŸèƒ½ä¿æŒä¸€è‡´
- **æµ‹è¯•æˆæœ¬**ï¼šä½ï¼Œä¸»è¦æµ‹è¯•æ–°å‚æ•°çš„è¯†åˆ«é€»è¾‘

#### ç»Ÿä¸€åçš„è§’è‰²è¯†åˆ«é€»è¾‘
```javascript
// ç®€æ´ç»Ÿä¸€çš„è§’è‰²è¯†åˆ«
async function identifyUserRole(scanParams, userInfo) {
    // 1. äºŒç»´ç æ‰«æï¼šä¼˜å…ˆä½¿ç”¨applyKindå‚æ•°
    if (scanParams.applyKind) {
        switch (scanParams.applyKind) {
            case '2':
                return await handleVisitorInvitation(scanParams);
            case '3':
                return await handleManagerVerification(scanParams, userInfo);
            case '4':
                return await handlePatrolVerification(scanParams, userInfo);
        }
    }

    // 2. å…¼å®¹å¤„ç†ï¼šæ”¯æŒç°æœ‰typeå‚æ•°
    if (scanParams.type === 'visitor_invite') {
        return await handleVisitorInvitation(scanParams);
    }

    // 3. éäºŒç»´ç è®¿é—®ï¼šä½¿ç”¨äº”å±‚æ•°æ®åº“æŸ¥è¯¢
    return await handleOwnerVerification(userInfo);
}
```

## ğŸ› ï¸ å…·ä½“å®ç°æ–¹æ¡ˆ

### å‰ç«¯å®ç°

#### å°ç¨‹åºå…¥å£é¡µé¢ä¿®æ”¹
```javascript
// pages/auth/phone-auth.vue æˆ–å…¶ä»–å…¥å£é¡µé¢
async onLoad(options) {
    // è§£æURLå‚æ•°
    const scanParams = this.parseUrlParams(options);

    // è¯†åˆ«ç”¨æˆ·è§’è‰²
    const roleResult = await UserRoleService.identifyRole({
        fromQrCode: !!scanParams.applyKind,
        applyKind: scanParams.applyKind,
        targetId: scanParams.butlerId || scanParams.patrolId,
        userPhone: this.getCurrentUserPhone(),
        openid: this.getCurrentOpenid()
    });

    // æ ¹æ®è§’è‰²ç»“æœè¿›è¡Œè·¯ç”±
    await this.routeByRole(roleResult);
}

async routeByRole(roleResult) {
    switch (roleResult.role) {
        case 'visitor':
            uni.redirectTo({ url: '/pages/auth/visitor-apply' });
            break;
        case 'manager':
            if (roleResult.verified) {
                this.setUserRole('manager', roleResult.data);
                uni.switchTab({ url: '/pages/manager/dashboard' });
            } else {
                this.showUnauthorizedError('ç®¡å®¶');
            }
            break;
        case 'patrol':
            if (roleResult.verified) {
                this.setUserRole('patrol', roleResult.data);
                uni.switchTab({ url: '/pages/patrol/dashboard' });
            } else {
                this.showUnauthorizedError('å·¡é€»å‘˜');
            }
            break;
        case 'owner':
            this.setUserRole('owner', roleResult.data);
            uni.switchTab({ url: '/pages/owner/dashboard' });
            break;
        default:
            this.handleUnregisteredUser();
    }
}
```

### åç«¯APIå¢å¼º

#### æ–°å¢è§’è‰²éªŒè¯æ¥å£
```java
@RestController
@RequestMapping("/parking/role")
public class RoleVerificationController {

    @PostMapping("/verifyByQrCode")
    public Result<Map<String, Object>> verifyRoleByQrCode(@RequestBody Map<String, Object> params) {
        String applyKind = (String) params.get("applyKind");
        String targetId = (String) params.get("targetId");
        String userPhone = (String) params.get("userPhone");

        Map<String, Object> result = new HashMap<>();

        switch (applyKind) {
            case "3": // ç®¡å®¶éªŒè¯
                Butler butler = butlerService.getById(targetId);
                if (butler != null && userPhone.equals(butler.getPhone())) {
                    result.put("verified", true);
                    result.put("role", "manager");
                    result.put("userData", butler);
                } else {
                    result.put("verified", false);
                    result.put("message", "æ‚¨ä¸æ˜¯è¯¥ç®¡å®¶ï¼Œæ— æ³•ä½¿ç”¨æ­¤äºŒç»´ç ");
                }
                break;

            case "4": // å·¡é€»å‘˜éªŒè¯
                Patrol patrol = patrolService.getById(targetId);
                if (patrol != null && userPhone.equals(patrol.getPhone())) {
                    result.put("verified", true);
                    result.put("role", "patrol");
                    result.put("userData", patrol);
                } else {
                    result.put("verified", false);
                    result.put("message", "æ‚¨ä¸æ˜¯è¯¥å·¡é€»å‘˜ï¼Œæ— æ³•ä½¿ç”¨æ­¤äºŒç»´ç ");
                }
                break;

            case "2": // è®¿å®¢é‚€è¯·ï¼ˆä¿æŒç°æœ‰é€»è¾‘ï¼‰
                result.put("verified", true);
                result.put("role", "visitor");
                break;
        }

        return Result.success(result);
    }
}

## ğŸ“Š è§’è‰²åŒºåˆ†å¯¹æ¯”è¡¨

| è§’è‰² | è¯†åˆ«æ–¹å¼ | applyKind | éªŒè¯æ–¹æ³• | æ•°æ®æº | è·³è½¬é¡µé¢ |
|------|----------|-----------|----------|--------|----------|
| **è®¿å®¢** | äºŒç»´ç æ‰«æ | `2` | äºŒç»´ç æœ‰æ•ˆæ€§éªŒè¯ | äºŒç»´ç å‚æ•° | `/pages/auth/visitor-apply` |
| **ç®¡å®¶** | äºŒç»´ç æ‰«æ | `3` | æ‰‹æœºå·+ç®¡å®¶IDåŒ¹é… | Butlerè¡¨ | `/pages/manager/dashboard` |
| **å·¡é€»å‘˜** | äºŒç»´ç æ‰«æ | `4` | æ‰‹æœºå·+å·¡é€»å‘˜IDåŒ¹é… | Patrolè¡¨ | `/pages/patrol/dashboard` |
| **ä¸šä¸»** | æ•°æ®åº“æŸ¥è¯¢ | æ—  | ä¸‰å±‚æŸ¥è¯¢æœºåˆ¶ | æœ¬åœ°è¡¨+å¤–éƒ¨API | `/pages/owner/dashboard` |

### ä¸šä¸»èº«ä»½çš„ä¸‰å±‚æŸ¥è¯¢æœºåˆ¶

| æŸ¥è¯¢å±‚çº§ | æ•°æ®æº | éªŒè¯æ–¹å¼ | è¯´æ˜ |
|----------|--------|----------|------|
| **ç¬¬äºŒå±‚** | Ownerinfoè¡¨ï¼ˆæœ¬åœ°ï¼‰ | æ‰‹æœºå·åŒ¹é… | æœ¬åœ°æ•°æ®åº“ä¸­çš„ä¸šä¸»ä¿¡æ¯ |
| **ç¬¬ä¸‰å±‚** | å¤–éƒ¨APIï¼ˆæœˆç¥¨ç³»ç»Ÿï¼‰ | æ‰‹æœºå·åŒ¹é… | è°ƒç”¨å¤–éƒ¨åœè½¦åœºæœˆç¥¨ç³»ç»ŸAPI |
| **å¤‡ç”¨** | ç¼“å­˜æœºåˆ¶ | æ‰‹æœºå·åŒ¹é… | æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œå‡å°‘APIè°ƒç”¨ |

## ğŸ¯ å…³é”®åŒºåˆ†ç‚¹

### 1. äºŒç»´ç å‚æ•°ä¼˜å…ˆ
- **æœ‰applyKindå‚æ•°**ï¼šç›´æ¥æŒ‰å‚æ•°å€¼ç¡®å®šè§’è‰²æ„å›¾
- **æ— applyKindå‚æ•°**ï¼šä½¿ç”¨ä¼ ç»Ÿäº”å±‚æ•°æ®åº“æŸ¥è¯¢

### 2. èº«ä»½éªŒè¯æœºåˆ¶
- **è®¿å®¢**ï¼šåªéœ€äºŒç»´ç æœ‰æ•ˆå³å¯ï¼ˆapplyKind=2ï¼‰
- **ç®¡å®¶/å·¡é€»å‘˜**ï¼šéœ€è¦éªŒè¯å½“å‰ç”¨æˆ·ç¡®å®æ˜¯è¯¥è§’è‰²ï¼ˆapplyKind=3/4ï¼‰
- **ä¸šä¸»**ï¼šé€šè¿‡äº”å±‚æŸ¥è¯¢æœºåˆ¶ç¡®è®¤ï¼ˆæœ¬åœ°è¡¨â†’å¤–éƒ¨APIâ†’è®¿å®¢è¡¨ï¼‰

### 3. ä¸šä¸»æŸ¥è¯¢çš„å¤æ‚æ€§
ä¸šä¸»èº«ä»½éªŒè¯æ˜¯æœ€å¤æ‚çš„ï¼ŒåŒ…å«ï¼š
- **æœ¬åœ°æŸ¥è¯¢**ï¼šOwnerinfoè¡¨ä¸­çš„æ‰‹æœºå·åŒ¹é…
- **å¤–éƒ¨API**ï¼šè°ƒç”¨åœè½¦åœºæœˆç¥¨ç³»ç»ŸAPIï¼Œæ”¯æŒå¤šåœè½¦åœºå¹¶è¡ŒæŸ¥è¯¢
- **ç¼“å­˜æœºåˆ¶**ï¼šé¿å…é‡å¤APIè°ƒç”¨ï¼Œæé«˜æ€§èƒ½
- **åˆ†é¡µå¤„ç†**ï¼šå¤–éƒ¨APIæ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§

### 4. é”™è¯¯å¤„ç†
```javascript
// ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
function handleRoleVerificationError(role, error) {
    const messages = {
        'manager': 'æ‚¨ä¸æ˜¯è¯¥ç®¡å®¶ï¼Œæ— æ³•ä½¿ç”¨æ­¤ç®¡å®¶äºŒç»´ç ',
        'patrol': 'æ‚¨ä¸æ˜¯è¯¥å·¡é€»å‘˜ï¼Œæ— æ³•ä½¿ç”¨æ­¤å·¡é€»å‘˜äºŒç»´ç ',
        'visitor': 'è®¿å®¢äºŒç»´ç æ— æ•ˆæˆ–å·²è¿‡æœŸ',
        'owner': 'æœªæ‰¾åˆ°æ‚¨çš„ä¸šä¸»ä¿¡æ¯ï¼Œç³»ç»Ÿå·²æŸ¥è¯¢æœ¬åœ°æ•°æ®åº“å’Œå¤–éƒ¨API'
    };

    uni.showModal({
        title: 'èº«ä»½éªŒè¯å¤±è´¥',
        content: messages[role] || 'èº«ä»½éªŒè¯å¤±è´¥ï¼Œè¯·é‡è¯•',
        showCancel: false
    });
}
```

## ğŸ› ï¸ å…·ä½“å®æ–½æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå‰ç«¯ä¿®æ”¹ï¼ˆqrcode-generator.vueï¼‰
```javascript
// åœ¨ generateVisitorInviteQrCode æ–¹æ³•ä¸­æ·»åŠ  applyKind å‚æ•°
const visitorParams = {
    qrId: qrId,
    applyKind: '2', // ğŸ†• æ·»åŠ ç»Ÿä¸€æ ‡è¯†å‚æ•°
    butlerName: this.butlerInfo?.username || 'ç®¡å®¶',
    butlerPhone: this.butlerInfo?.phone || userInfo.phone,
    fullAddress: this.fullAddress,
    // ... ä¿æŒå…¶ä»–å‚æ•°ä¸å˜
    type: 'visitor_invite', // ä¿ç•™ç°æœ‰å‚æ•°ï¼Œç¡®ä¿å…¼å®¹æ€§
    timestamp: Date.now()
};
```

### ç¬¬äºŒæ­¥ï¼šå°ç¨‹åºå…¥å£ä¼˜åŒ–ï¼ˆphone-auth.vueæˆ–å…¶ä»–å…¥å£é¡µé¢ï¼‰
```javascript
// åœ¨ onLoad æ–¹æ³•ä¸­æ·»åŠ ç»Ÿä¸€çš„è§’è‰²è¯†åˆ«
async onLoad(options) {
    try {
        // è§£æURLå‚æ•°
        const scanParams = this.parseUrlParams(options);

        // ç»Ÿä¸€è§’è‰²è¯†åˆ«
        const roleResult = await this.identifyUserRole(scanParams);

        // æ ¹æ®è§’è‰²ç»“æœè¿›è¡Œè·¯ç”±
        await this.routeByRole(roleResult);

    } catch (error) {
        console.error('è§’è‰²è¯†åˆ«å¤±è´¥:', error);
        // é™çº§åˆ°ä¼ ç»Ÿæµç¨‹
        this.handleTraditionalFlow();
    }
}

async identifyUserRole(scanParams) {
    // ä¼˜å…ˆæ£€æŸ¥ applyKind å‚æ•°
    if (scanParams.applyKind) {
        switch (scanParams.applyKind) {
            case '2': return { role: 'visitor', source: 'qr_code' };
            case '3': return await this.verifyManager(scanParams);
            case '4': return await this.verifyPatrol(scanParams);
        }
    }

    // å…¼å®¹ç°æœ‰å‚æ•°
    if (scanParams.type === 'visitor_invite') {
        return { role: 'visitor', source: 'qr_code_legacy' };
    }

    // æ— äºŒç»´ç å‚æ•°ï¼Œèµ°ä¸šä¸»æŸ¥è¯¢
    return { role: 'owner', source: 'database_query' };
}
```

### ç¬¬ä¸‰æ­¥ï¼šåç«¯æ¥å£å¢å¼ºï¼ˆå¯é€‰ï¼‰
```java
// æ–°å¢ç»Ÿä¸€çš„è§’è‰²éªŒè¯æ¥å£
@PostMapping("/verifyRoleByQrCode")
public Result<Map<String, Object>> verifyRoleByQrCode(@RequestBody Map<String, Object> params) {
    String applyKind = (String) params.get("applyKind");
    String targetId = (String) params.get("targetId");
    String userPhone = (String) params.get("userPhone");

    Map<String, Object> result = new HashMap<>();

    switch (applyKind) {
        case "2": // è®¿å®¢é‚€è¯·
            result.put("verified", true);
            result.put("role", "visitor");
            break;

        case "3": // ç®¡å®¶éªŒè¯
            Butler butler = butlerService.getById(targetId);
            if (butler != null && userPhone.equals(butler.getPhone())) {
                result.put("verified", true);
                result.put("role", "manager");
                result.put("userData", butler);
            } else {
                result.put("verified", false);
                result.put("message", "æ‚¨ä¸æ˜¯è¯¥ç®¡å®¶ï¼Œæ— æ³•ä½¿ç”¨æ­¤äºŒç»´ç ");
            }
            break;

        case "4": // å·¡é€»å‘˜éªŒè¯
            Patrol patrol = patrolService.getById(targetId);
            if (patrol != null && userPhone.equals(patrol.getPhone())) {
                result.put("verified", true);
                result.put("role", "patrol");
                result.put("userData", patrol);
            } else {
                result.put("verified", false);
                result.put("message", "æ‚¨ä¸æ˜¯è¯¥å·¡é€»å‘˜ï¼Œæ— æ³•ä½¿ç”¨æ­¤äºŒç»´ç ");
            }
            break;
    }

    return Result.success(result);
}
```

## ğŸ“‹ å®æ–½æ£€æŸ¥æ¸…å•

### å‰ç«¯ä¿®æ”¹
- [ ] ä¿®æ”¹ `pagesB/butler/qrcode-generator.vue` æ·»åŠ  applyKind=2 å‚æ•°
- [ ] åœ¨å°ç¨‹åºå…¥å£é¡µé¢æ·»åŠ ç»Ÿä¸€è§’è‰²è¯†åˆ«é€»è¾‘
- [ ] æµ‹è¯•è®¿å®¢äºŒç»´ç ç”Ÿæˆå’Œæ‰«æåŠŸèƒ½
- [ ] ç¡®ä¿å‘åå…¼å®¹æ€§ï¼ˆæ”¯æŒç°æœ‰typeå‚æ•°ï¼‰

### åç«¯ä¿®æ”¹ï¼ˆå¯é€‰ï¼‰
- [ ] æ–°å¢è§’è‰²éªŒè¯æ¥å£
- [ ] ä¿æŒç°æœ‰äº”å±‚æŸ¥è¯¢é€»è¾‘ä¸å˜
- [ ] æ·»åŠ applyKindå‚æ•°çš„å¤„ç†é€»è¾‘

### æµ‹è¯•éªŒè¯
- [ ] æµ‹è¯•è®¿å®¢é‚€è¯·äºŒç»´ç çš„ç”Ÿæˆå’Œæ‰«æ
- [ ] æµ‹è¯•ç®¡å®¶äºŒç»´ç çš„èº«ä»½éªŒè¯
- [ ] æµ‹è¯•å·¡é€»å‘˜äºŒç»´ç çš„èº«ä»½éªŒè¯
- [ ] æµ‹è¯•ä¸šä¸»èº«ä»½çš„äº”å±‚æŸ¥è¯¢æœºåˆ¶
- [ ] éªŒè¯å‘åå…¼å®¹æ€§

## ğŸ¯ æ€»ç»“

é€šè¿‡ä¸ºè®¿å®¢é‚€è¯·äºŒç»´ç æ·»åŠ  `applyKind=2` å‚æ•°ï¼Œå¯ä»¥å®ç°ï¼š

1. **ç»Ÿä¸€çš„å‚æ•°ä½“ç³»**ï¼šæ‰€æœ‰è§’è‰²éƒ½ä½¿ç”¨applyKindæ ‡è¯†
2. **ç®€åŒ–çš„è¯†åˆ«é€»è¾‘**ï¼šä¸€ä¸ªå‚æ•°å°±èƒ½ç¡®å®šè§’è‰²ç±»å‹
3. **å®Œæ•´çš„å‘åå…¼å®¹**ï¼šä¿ç•™ç°æœ‰å‚æ•°ï¼Œç¡®ä¿åŠŸèƒ½ä¸å—å½±å“
4. **ä¼˜ç§€çš„æ‰©å±•æ€§**ï¼šæ–°å¢è§’è‰²åªéœ€åˆ†é…æ–°çš„applyKindå€¼
5. **ä½æˆæœ¬çš„å®æ–½**ï¼šåªéœ€ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼Œæ·»åŠ ä¸€ä¸ªå‚æ•°

è¿™æ˜¯ä¸€ä¸ªå°æ”¹åŠ¨å¸¦æ¥å¤§æ”¶ç›Šçš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œå¼ºçƒˆæ¨èå®æ–½ã€‚



## ğŸ› ï¸ å…·ä½“å®æ–½æ–¹æ¡ˆ

### é˜¶æ®µä¸€ï¼šæ ¸å¿ƒä¼˜åŒ–ï¼ˆ1-2å‘¨ï¼‰

#### 1.1 åˆ›å»ºç»Ÿä¸€éªŒè¯ä¸­å¿ƒ
```javascript
// æ–‡ä»¶ï¼šutils/qrcode-validator.js
export class QrCodeValidator {
    static async validateAndRoute(qrId, options = {}) {
        try {
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            uni.showLoading({ title: 'éªŒè¯äºŒç»´ç ...' });

            // æ‰§è¡ŒéªŒè¯
            const result = await this.performValidation(qrId);

            // æ ¹æ®ç»“æœè·¯ç”±
            return await this.handleValidationResult(result, options);

        } catch (error) {
            return this.handleValidationError(error);
        } finally {
            uni.hideLoading();
        }
    }

    static async performValidation(qrId) {
        // æ£€æŸ¥æœ¬åœ°ç¼“å­˜
        const cached = this.getCachedValidation(qrId);
        if (cached && this.isCacheValid(cached)) {
            return cached;
        }

        // è°ƒç”¨åç«¯éªŒè¯
        const response = await request({
            url: '/parking/qrcode/validateOnly',
            method: 'POST',
            data: { qrId, openid: this.getCurrentOpenid() }
        });

        // ç¼“å­˜ç»“æœ
        this.cacheValidation(qrId, response);

        return response;
    }
}
```

#### 1.2 ä¼˜åŒ–é¡µé¢å…¥å£é€»è¾‘
```javascript
// æ–‡ä»¶ï¼špages/auth/phone-auth.vue - onLoadæ–¹æ³•ä¼˜åŒ–
async onLoad(options) {
    // è§£æå‚æ•°
    this.parseUrlParams(options);

    // å¦‚æœæœ‰äºŒç»´ç ï¼Œç«‹å³éªŒè¯å¹¶è·¯ç”±
    if (this.scannedParams.qrId) {
        const result = await QrCodeValidator.validateAndRoute(
            this.scannedParams.qrId,
            { autoRoute: true }
        );

        if (result.shouldRedirect) {
            uni.redirectTo({ url: result.targetUrl });
            return;
        }
    }

    // ç»§ç»­åŸæœ‰é€»è¾‘
    this.initializePage();
}
```

### é˜¶æ®µäºŒï¼šä½“éªŒä¼˜åŒ–ï¼ˆ2-3å‘¨ï¼‰

#### 2.1 æ™ºèƒ½çŠ¶æ€æç¤ºç»„ä»¶
```vue
<!-- æ–‡ä»¶ï¼šcomponents/smart-status-indicator.vue -->
<template>
    <view class="status-container" v-if="visible">
        <view class="status-card" :class="statusType">
            <view class="status-icon">{{ statusConfig.icon }}</view>
            <view class="status-content">
                <text class="status-title">{{ statusConfig.title }}</text>
                <text class="status-message">{{ statusConfig.message }}</text>
            </view>
            <view class="status-actions" v-if="statusConfig.actions">
                <button v-for="action in statusConfig.actions"
                        :key="action.id"
                        @click="handleAction(action)"
                        :class="['action-btn', action.type]">
                    {{ action.text }}
                </button>
            </view>
        </view>
    </view>
</template>

<script>
export default {
    props: {
        status: String,
        qrId: String,
        context: Object
    },
    computed: {
        statusConfig() {
            return this.getStatusConfig(this.status);
        }
    },
    methods: {
        getStatusConfig(status) {
            const configs = {
                'validating': {
                    icon: 'ğŸ”',
                    title: 'æ­£åœ¨éªŒè¯',
                    message: 'è¯·ç¨å€™ï¼Œæ­£åœ¨éªŒè¯äºŒç»´ç ...',
                    type: 'loading'
                },
                'valid': {
                    icon: 'âœ…',
                    title: 'éªŒè¯æˆåŠŸ',
                    message: 'äºŒç»´ç æœ‰æ•ˆï¼Œæ­£åœ¨è·³è½¬...',
                    type: 'success'
                },
                'used': {
                    icon: 'ğŸ”’',
                    title: 'äºŒç»´ç å·²ä½¿ç”¨',
                    message: 'æ­¤äºŒç»´ç å·²å®Œæˆé¢„çº¦ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹é¢„çº¦çŠ¶æ€',
                    type: 'warning',
                    actions: [
                        { id: 'view', text: 'æŸ¥çœ‹é¢„çº¦', type: 'primary' },
                        { id: 'contact', text: 'è”ç³»ç®¡å®¶', type: 'secondary' }
                    ]
                }
            };
            return configs[status] || configs['validating'];
        }
    }
};
</script>
```

#### 2.2 æ”¹è¿›TabBarå¯¼èˆªé€»è¾‘
```javascript
// æ–‡ä»¶ï¼šcomponents/custom-tabbar.vue - ä¼˜åŒ–checkVisitorQrCodeUsageæ–¹æ³•
async checkVisitorQrCodeUsage() {
    try {
        // ä½¿ç”¨ç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†å™¨
        const stateManager = VisitorQrCodeStateManager.getInstance();
        const currentState = await stateManager.getCurrentState();

        // æ ¹æ®çŠ¶æ€å†³å®šæ˜¯å¦å…è®¸è®¿é—®
        switch (currentState.status) {
            case 'completed':
                this.showCompletedReservationGuide(currentState);
                return true;
            case 'pending':
                this.showPendingReservationGuide(currentState);
                return true;
            case 'new':
                return false; // å…è®¸æ–°é¢„çº¦
            default:
                return false;
        }
    } catch (error) {
        console.error('æ£€æŸ¥è®¿å®¢çŠ¶æ€å¤±è´¥:', error);
        return false;
    }
}

showCompletedReservationGuide(state) {
    uni.showModal({
        title: 'é¢„çº¦å·²å®Œæˆ',
        content: `æ‚¨çš„è®¿å®¢é¢„çº¦å·²å®Œæˆï¼\n\né¢„çº¦æ—¶é—´ï¼š${state.reservationTime}\nè®¿é—®åœ°å€ï¼š${state.address}\n\næ‚¨å¯ä»¥æŸ¥çœ‹é¢„çº¦è¯¦æƒ…æˆ–è”ç³»ç®¡å®¶ã€‚`,
        showCancel: true,
        cancelText: 'æŸ¥çœ‹è¯¦æƒ…',
        confirmText: 'çŸ¥é“äº†',
        success: (res) => {
            if (!res.confirm) {
                this.navigateToReservationDetail(state.reservationId);
            }
        }
    });
}
```

### é˜¶æ®µä¸‰ï¼šé«˜çº§åŠŸèƒ½ï¼ˆ3-4å‘¨ï¼‰

#### 3.1 é¢„çº¦çŠ¶æ€æ—¶é—´çº¿
```vue
<!-- æ–‡ä»¶ï¼šcomponents/reservation-timeline.vue -->
<template>
    <view class="timeline-container">
        <view class="timeline-header">
            <text class="timeline-title">é¢„çº¦è¿›åº¦</text>
            <text class="timeline-id">é¢„çº¦å·ï¼š{{ reservationId }}</text>
        </view>

        <view class="timeline-steps">
            <view v-for="(step, index) in timelineSteps"
                  :key="step.id"
                  :class="['timeline-step', step.status]">
                <view class="step-connector" v-if="index > 0"></view>
                <view class="step-marker">
                    <text class="step-icon">{{ step.icon }}</text>
                </view>
                <view class="step-content">
                    <text class="step-title">{{ step.title }}</text>
                    <text class="step-time">{{ step.time }}</text>
                    <text class="step-description">{{ step.description }}</text>
                </view>
            </view>
        </view>
    </view>
</template>
```

## ğŸ¯ é¢„æœŸæ•ˆæœ

### ç”¨æˆ·ä½“éªŒæå‡
- **æ‰«ç åˆ°é¢„çº¦å®Œæˆæ—¶é—´å‡å°‘50%**ï¼šé€šè¿‡ç»Ÿä¸€éªŒè¯æµç¨‹
- **é”™è¯¯å¤„ç†æ»¡æ„åº¦æå‡80%**ï¼šå‹å¥½çš„é”™è¯¯æç¤ºå’Œå¼•å¯¼
- **ç”¨æˆ·æµç¨‹å®Œæˆç‡æå‡30%**ï¼šæ™ºèƒ½å¯¼èˆªå’ŒçŠ¶æ€æç¤º

### æŠ€æœ¯æŒ‡æ ‡æ”¹è¿›
- **APIè°ƒç”¨æ¬¡æ•°å‡å°‘40%**ï¼šç¼“å­˜ç­–ç•¥å’Œé˜²é‡å¤è°ƒç”¨
- **é¡µé¢åŠ è½½é€Ÿåº¦æå‡60%**ï¼šæ‡’åŠ è½½å’Œé¢„åŠ è½½ä¼˜åŒ–
- **ä»£ç ç»´æŠ¤æˆæœ¬é™ä½50%**ï¼šç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†å’Œç»„ä»¶åŒ–

### ä¸šåŠ¡ä»·å€¼å¢é•¿
- **è®¿å®¢é¢„çº¦æˆåŠŸç‡æå‡25%**ï¼šæµç¨‹ç®€åŒ–å’Œé”™è¯¯å‡å°‘
- **ç®¡å®¶å·¥ä½œæ•ˆç‡æå‡35%**ï¼šå‡å°‘é‡å¤å’¨è¯¢å’Œé—®é¢˜å¤„ç†
- **ç³»ç»Ÿç¨³å®šæ€§æå‡90%**ï¼šæ›´å¥½çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç®¡ç†

## ğŸ“ˆ å®æ–½å»ºè®®

### 1. æ¸è¿›å¼æ”¹è¿›
- å…ˆå®æ–½æ ¸å¿ƒä¼˜åŒ–ï¼Œç¡®ä¿åŸºç¡€åŠŸèƒ½ç¨³å®š
- é€æ­¥æ·»åŠ é«˜çº§åŠŸèƒ½ï¼Œé¿å…å¤§è§„æ¨¡é‡æ„
- æ¯ä¸ªé˜¶æ®µéƒ½è¿›è¡Œå……åˆ†æµ‹è¯•

### 2. ç”¨æˆ·åé¦ˆé©±åŠ¨
- æ”¶é›†ç”¨æˆ·ä½¿ç”¨åé¦ˆ
- æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè°ƒæ•´ä¼˜åŒ–æ–¹å‘
- å»ºç«‹ç”¨æˆ·ä½“éªŒç›‘æ§æœºåˆ¶

### 3. æŠ€æœ¯å€ºåŠ¡ç®¡ç†
- åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­é€æ­¥æ¸…ç†æ—§ä»£ç 
- å»ºç«‹ä»£ç è§„èŒƒå’Œæœ€ä½³å®è·µ
- å®šæœŸè¿›è¡Œä»£ç å®¡æŸ¥å’Œé‡æ„
