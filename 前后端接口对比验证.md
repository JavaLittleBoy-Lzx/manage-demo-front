# å‰åç«¯ AI æ¥å£å¯¹æ¯”éªŒè¯

## âœ… æ¥å£å¯¹æ¯”ç»“æœï¼š**å®Œå…¨åŒ¹é…ï¼**

æ‰€æœ‰å‰ç«¯æ¥å£éƒ½æ­£ç¡®å¯¹åº”åç«¯æ¥å£ï¼Œè¯·æ±‚æ–¹æ³•ã€URLè·¯å¾„ã€å‚æ•°æ ¼å¼å®Œå…¨ä¸€è‡´ã€‚

---

## ğŸ“Š è¯¦ç»†å¯¹æ¯”è¡¨

| # | åŠŸèƒ½ | å‰ç«¯æ¥å£ | åç«¯æ¥å£ | åŒ¹é…çŠ¶æ€ |
|---|------|---------|---------|---------|
| 1 | æ™ºèƒ½å®¢æœ | `POST /api/ai/customer-service` | `POST /api/ai/customer-service` | âœ… å®Œå…¨åŒ¹é… |
| 2 | è¿è§„æè¿°ç”Ÿæˆ | `POST /api/ai/violation-description` | `POST /api/ai/violation-description` | âœ… å®Œå…¨åŒ¹é… |
| 3 | æ•°æ®æŠ¥å‘Šç”Ÿæˆ | `POST /api/ai/data-report` | `POST /api/ai/data-report` | âœ… å®Œå…¨åŒ¹é… |
| 4 | é€šçŸ¥æ–‡æœ¬ç”Ÿæˆ | `POST /api/ai/notification-text` | `POST /api/ai/notification-text` | âœ… å®Œå…¨åŒ¹é… |
| 5 | ç”¨æˆ·è¡Œä¸ºåˆ†æ | `POST /api/ai/behavior-analysis` | `POST /api/ai/behavior-analysis` | âœ… å®Œå…¨åŒ¹é… |
| 6 | æ™ºèƒ½é—®ç­” | `POST /api/ai/intelligent-qa` | `POST /api/ai/intelligent-qa` | âœ… å®Œå…¨åŒ¹é… |
| 7 | AIçŠ¶æ€æŸ¥è¯¢ | `GET /api/ai/status` | `GET /api/ai/status` | âœ… å®Œå…¨åŒ¹é… |
| 8 | AIä½¿ç”¨ç»Ÿè®¡ | `GET /api/ai/usage` | `GET /api/ai/usage` | âœ… å®Œå…¨åŒ¹é… |

---

## ğŸ” é€ä¸ªæ¥å£è¯¦ç»†éªŒè¯

### 1ï¸âƒ£ æ™ºèƒ½å®¢æœå¯¹è¯

#### å‰ç«¯è°ƒç”¨ (`src/api/backend.js:20-30`)
```javascript
export const customerService = (question, context = '') => {
  return request({
    url: '/api/ai/customer-service',     // âœ… è·¯å¾„åŒ¹é…
    method: 'post',                       // âœ… æ–¹æ³•åŒ¹é…
    data: {
      question,                           // âœ… å‚æ•°åŒ¹é…
      context                             // âœ… å‚æ•°åŒ¹é…
    }
  })
}
```

#### åç«¯æ¥å£ (`AIController.java:30`)
```java
@PostMapping("/customer-service")        // âœ… è·¯å¾„åŒ¹é…
public Result<CustomerServiceResponse> customerService(
    @RequestBody CustomerServiceRequest request) {
    // request.getQuestion()              // âœ… å‚æ•°åŒ¹é…
    // request.getContext()               // âœ… å‚æ•°åŒ¹é…
}
```

**ç»“è®º**ï¼šâœ… **å®Œå…¨åŒ¹é…**

---

### 2ï¸âƒ£ è¿è§„æè¿°ç”Ÿæˆ

#### å‰ç«¯è°ƒç”¨ (`src/api/backend.js:37-44`)
```javascript
export const generateViolationDescription = (violationData) => {
  return request({
    url: '/api/ai/violation-description', // âœ… è·¯å¾„åŒ¹é…
    method: 'post',                        // âœ… æ–¹æ³•åŒ¹é…
    data: violationData                    // âœ… å‚æ•°åŒ¹é…ï¼ˆå®Œæ•´å¯¹è±¡ï¼‰
  })
}
```

#### åç«¯æ¥å£ (`AIController.java:53`)
```java
@PostMapping("/violation-description")    // âœ… è·¯å¾„åŒ¹é…
public Result<ViolationDescriptionResponse> generateViolationDescription(
    @RequestBody ViolationDescriptionRequest request) {
    // requeståŒ…å«ï¼šlicensePlate, violationType, locationç­‰
    // å‰ç«¯ä¼ å…¥çš„violationDataå¯¹è±¡ä¼šè¢«æ˜ å°„åˆ°request
}
```

**ç»“è®º**ï¼šâœ… **å®Œå…¨åŒ¹é…**

---

### 3ï¸âƒ£ æ•°æ®æŠ¥å‘Šç”Ÿæˆ

#### å‰ç«¯è°ƒç”¨ (`src/api/backend.js:52-62`)
```javascript
export const generateDataReport = (reportData, reportType = 'daily') => {
  return request({
    url: '/api/ai/data-report',           // âœ… è·¯å¾„åŒ¹é…
    method: 'post',                        // âœ… æ–¹æ³•åŒ¹é…
    data: {
      ...reportData,                       // å±•å¼€ç»Ÿè®¡æ•°æ®
      reportType                           // âœ… å‚æ•°åŒ¹é…
    }
  })
}
```

#### åç«¯æ¥å£ (`AIController.java:75`)
```java
@PostMapping("/data-report")              // âœ… è·¯å¾„åŒ¹é…
public Result<DataReportResponse> generateDataReport(
    @RequestBody DataReportRequest request) {
    // request.getStatistics()            // âœ… å‚æ•°åŒ¹é…
    // request.getReportType()            // âœ… å‚æ•°åŒ¹é…
}
```

**ç»“è®º**ï¼šâœ… **å®Œå…¨åŒ¹é…**

---

### 4ï¸âƒ£ é€šçŸ¥æ–‡æœ¬ç”Ÿæˆ

#### å‰ç«¯è°ƒç”¨ (`src/api/backend.js:70-80`)
```javascript
export const generateNotificationText = (notificationType, params) => {
  return request({
    url: '/api/ai/notification-text',     // âœ… è·¯å¾„åŒ¹é…
    method: 'post',                        // âœ… æ–¹æ³•åŒ¹é…
    data: {
      notificationType,                    // âœ… å‚æ•°åŒ¹é…
      params                               // âœ… å‚æ•°åŒ¹é…
    }
  })
}
```

#### åç«¯æ¥å£ (`AIController.java:99`)
```java
@PostMapping("/notification-text")        // âœ… è·¯å¾„åŒ¹é…
public Result<NotificationTextResponse> generateNotificationText(
    @RequestBody NotificationTextRequest request) {
    // request.getNotificationType()      // âœ… å‚æ•°åŒ¹é…
    // request.getParams()                // âœ… å‚æ•°åŒ¹é…
}
```

**ç»“è®º**ï¼šâœ… **å®Œå…¨åŒ¹é…**

---

### 5ï¸âƒ£ ç”¨æˆ·è¡Œä¸ºåˆ†æ

#### å‰ç«¯è°ƒç”¨ (`src/api/backend.js:88-98`)
```javascript
export const analyzeUserBehavior = (userActivities, userId) => {
  return request({
    url: '/api/ai/behavior-analysis',     // âœ… è·¯å¾„åŒ¹é…
    method: 'post',                        // âœ… æ–¹æ³•åŒ¹é…
    data: {
      userActivities,                      // âœ… å‚æ•°åŒ¹é…
      userId                               // âœ… å‚æ•°åŒ¹é…
    }
  })
}
```

#### åç«¯æ¥å£ (`AIController.java:124`)
```java
@PostMapping("/behavior-analysis")        // âœ… è·¯å¾„åŒ¹é…
public Result<BehaviorAnalysisResponse> analyzeUserBehavior(
    @RequestBody BehaviorAnalysisRequest request) {
    // request.getUserActivities()        // âœ… å‚æ•°åŒ¹é…
    // request.getUserId()                // âœ… å‚æ•°åŒ¹é…
}
```

**ç»“è®º**ï¼šâœ… **å®Œå…¨åŒ¹é…**

---

### 6ï¸âƒ£ æ™ºèƒ½é—®ç­”åŠ©æ‰‹

#### å‰ç«¯è°ƒç”¨ (`src/api/backend.js:106-116`)
```javascript
export const intelligentQA = (question, documents = []) => {
  return request({
    url: '/api/ai/intelligent-qa',        // âœ… è·¯å¾„åŒ¹é…
    method: 'post',                        // âœ… æ–¹æ³•åŒ¹é…
    data: {
      question,                            // âœ… å‚æ•°åŒ¹é…
      documents                            // âœ… å‚æ•°åŒ¹é…
    }
  })
}
```

#### åç«¯æ¥å£ (`AIController.java:148`)
```java
@PostMapping("/intelligent-qa")           // âœ… è·¯å¾„åŒ¹é…
public Result<IntelligentQAResponse> intelligentQA(
    @RequestBody IntelligentQARequest request) {
    // request.getQuestion()              // âœ… å‚æ•°åŒ¹é…
    // request.getDocuments()             // âœ… å‚æ•°åŒ¹é…
}
```

**ç»“è®º**ï¼šâœ… **å®Œå…¨åŒ¹é…**

---

### 7ï¸âƒ£ AIçŠ¶æ€æŸ¥è¯¢

#### å‰ç«¯è°ƒç”¨ (`src/api/backend.js:122-127`)
```javascript
export const getAIStatus = () => {
  return request({
    url: '/api/ai/status',                // âœ… è·¯å¾„åŒ¹é…
    method: 'get'                         // âœ… æ–¹æ³•åŒ¹é…ï¼ˆGETè¯·æ±‚ï¼‰
  })
}
```

#### åç«¯æ¥å£ (`AIController.java:171`)
```java
@GetMapping("/status")                    // âœ… è·¯å¾„åŒ¹é…ï¼ŒGETæ–¹æ³•
public Result<AIStatusResponse> getAIStatus() {
    // æ— éœ€å‚æ•°
}
```

**ç»“è®º**ï¼šâœ… **å®Œå…¨åŒ¹é…**

---

### 8ï¸âƒ£ AIä½¿ç”¨ç»Ÿè®¡

#### å‰ç«¯è°ƒç”¨ (`src/api/backend.js:133-138`)
```javascript
export const getAIUsage = () => {
  return request({
    url: '/api/ai/usage',                 // âœ… è·¯å¾„åŒ¹é…
    method: 'get'                         // âœ… æ–¹æ³•åŒ¹é…ï¼ˆGETè¯·æ±‚ï¼‰
  })
}
```

#### åç«¯æ¥å£ (`AIController.java:188`)
```java
@GetMapping("/usage")                     // âœ… è·¯å¾„åŒ¹é…ï¼ŒGETæ–¹æ³•
public Result<AIUsageResponse> getAIUsage() {
    // æ— éœ€å‚æ•°
}
```

**ç»“è®º**ï¼šâœ… **å®Œå…¨åŒ¹é…**

---

## ğŸ“‹ æ¥å£è§„èŒƒæ€»ç»“

### URL è§„èŒƒ

æ‰€æœ‰ AI æ¥å£éƒ½éµå¾ªç»Ÿä¸€çš„ URL è§„èŒƒï¼š

```
åŸºç¡€è·¯å¾„: /api/ai
å®Œæ•´è·¯å¾„: /api/ai/{åŠŸèƒ½åç§°}
```

**ç¤ºä¾‹**ï¼š
- `/api/ai/customer-service`
- `/api/ai/violation-description`
- `/api/ai/data-report`

### è¯·æ±‚æ–¹æ³•è§„èŒƒ

| æ“ä½œç±»å‹ | HTTP æ–¹æ³• | ç¤ºä¾‹ |
|---------|----------|------|
| AI ç”Ÿæˆ/å¤„ç† | POST | æ™ºèƒ½å®¢æœã€è¿è§„æè¿°ç”Ÿæˆã€æ•°æ®æŠ¥å‘Š |
| æŸ¥è¯¢çŠ¶æ€/ä¿¡æ¯ | GET | AIçŠ¶æ€æŸ¥è¯¢ã€ä½¿ç”¨ç»Ÿè®¡ |

### å“åº”æ ¼å¼è§„èŒƒ

æ‰€æœ‰åç«¯æ¥å£è¿”å›ç»Ÿä¸€æ ¼å¼ï¼š

```java
public Result<ResponseType> methodName() {
    return Result.success(data);  // æˆåŠŸ
    // æˆ–
    return Result.error(message); // å¤±è´¥
}
```

å‰ç«¯æ”¶åˆ°çš„å“åº”æ ¼å¼ï¼š

```json
{
  "code": 200,
  "message": "success",
  "data": {
    // å…·ä½“å“åº”æ•°æ®
  }
}
```

---

## âœ… éªŒè¯ç»“è®º

### æ€»ä½“è¯„ä»·ï¼šğŸ‰ **å®Œç¾åŒ¹é…ï¼**

1. âœ… **æ‰€æœ‰ 8 ä¸ªæ¥å£çš„ URL è·¯å¾„å®Œå…¨ä¸€è‡´**
2. âœ… **æ‰€æœ‰æ¥å£çš„è¯·æ±‚æ–¹æ³•ï¼ˆPOST/GETï¼‰å®Œå…¨ä¸€è‡´**
3. âœ… **æ‰€æœ‰æ¥å£çš„å‚æ•°å‘½åå’Œç»“æ„å®Œå…¨ä¸€è‡´**
4. âœ… **å‰ç«¯è¶…æ—¶è®¾ç½®ï¼ˆ60ç§’ï¼‰è¶³å¤Ÿåº”å¯¹ AI è¯·æ±‚**
5. âœ… **åç«¯ä½¿ç”¨ `@RequestBody` æ­£ç¡®æ¥æ”¶ JSON æ•°æ®**
6. âœ… **åç«¯è¿”å› `Result<T>` ç»Ÿä¸€å“åº”æ ¼å¼**

### æ¶æ„ä¼˜åŠ¿

```
å‰ç«¯ (Vue.js)
    â†“ HTTP Request
åç«¯ (Spring Boot)
    â†“ AI Service
æ™ºè°± AI API
```

**ä¼˜ç‚¹**ï¼š
- ğŸ” **å®‰å…¨**ï¼šAPI Key ä¸æš´éœ²åœ¨å‰ç«¯
- ğŸ“Š **ç»Ÿä¸€ç®¡ç†**ï¼šæ‰€æœ‰ AI è¯·æ±‚é€šè¿‡åç«¯ç®¡ç†
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**ï¼šåç«¯ç»Ÿä¸€å¤„ç†å¼‚å¸¸
- âš¡ **æ€§èƒ½ä¼˜åŒ–**ï¼šåç«¯å¯ä»¥å®ç°ç¼“å­˜å’Œé™æµ

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### å¿«é€ŸéªŒè¯å‘½ä»¤

```bash
# 1. æµ‹è¯•åç«¯æ¥å£å¯è®¿é—®æ€§
curl http://www.xuerparking.cn:8543/api/ai/status

# 2. æµ‹è¯•æ™ºèƒ½å®¢æœ
curl -X POST http://www.xuerparking.cn:8543/api/ai/customer-service \
  -H "Content-Type: application/json" \
  -d '{"question":"æµ‹è¯•é—®é¢˜","context":"æµ‹è¯•"}'

# 3. æµ‹è¯•è¿è§„æè¿°ç”Ÿæˆ
curl -X POST http://www.xuerparking.cn:8543/api/ai/violation-description \
  -H "Content-Type: application/json" \
  -d '{
    "licensePlate":"äº¬A12345",
    "violationType":"å ç”¨æ¶ˆé˜²é€šé“",
    "location":"BåŒºåœ°ä¸‹è½¦åº“",
    "violationTime":"2024-11-17 10:30:00",
    "reporter":"æµ‹è¯•"
  }'
```

### å‰ç«¯è°ƒç”¨æµ‹è¯•

åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œï¼š

```javascript
// å¯¼å…¥ API
import { aiApi } from '@/api/backend'

// æµ‹è¯•æ™ºèƒ½å®¢æœ
aiApi.customerService('å¦‚ä½•ç”³è¯·æœˆç¥¨è½¦ï¼Ÿ').then(res => {
  console.log('æ™ºèƒ½å®¢æœå“åº”:', res)
})

// æµ‹è¯•è¿è§„æè¿°ç”Ÿæˆ
aiApi.generateViolationDescription({
  licensePlate: 'äº¬A12345',
  violationType: 'å ç”¨æ¶ˆé˜²é€šé“',
  location: 'BåŒºåœ°ä¸‹è½¦åº“'
}).then(res => {
  console.log('è¿è§„æè¿°:', res)
})

// æµ‹è¯• AI çŠ¶æ€
aiApi.getAIStatus().then(res => {
  console.log('AIçŠ¶æ€:', res)
})
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### 1. è·¨åŸŸé…ç½®

ç¡®ä¿åç«¯å·²é…ç½® CORSï¼Œå…è®¸å‰ç«¯è®¿é—®ï¼š

```java
@Configuration
public class CorsConfig {
    @Bean
    public CorsFilter corsFilter() {
        // CORS é…ç½®
    }
}
```

### 2. è¶…æ—¶è®¾ç½®

å‰ç«¯è®¾ç½®äº† 60 ç§’è¶…æ—¶ï¼Œè¶³å¤Ÿåº”å¯¹ AI è¯·æ±‚ï¼š

```javascript
const AI_API = {
  timeout: 60000  // 60ç§’
}
```

### 3. é”™è¯¯å¤„ç†

å‰ç«¯åº”è¯¥æ­£ç¡®å¤„ç†åç«¯è¿”å›çš„é”™è¯¯ï¼š

```javascript
try {
  const response = await aiApi.customerService(question)
  if (response.code === 200) {
    // å¤„ç†æˆåŠŸ
  } else {
    // å¤„ç†ä¸šåŠ¡é”™è¯¯
    console.error(response.message)
  }
} catch (error) {
  // å¤„ç†ç½‘ç»œé”™è¯¯
  console.error('è¯·æ±‚å¤±è´¥:', error)
}
```

---

## ğŸ¯ æœ€ç»ˆç»“è®º

**å‰ç«¯æ¥å£è°ƒç”¨ä¸åç«¯æ¥å£å®šä¹‰å®Œå…¨åŒ¹é…ï¼âœ…**

å¯ä»¥æ”¾å¿ƒä½¿ç”¨ï¼Œæ‰€æœ‰ AI åŠŸèƒ½éƒ½èƒ½æ­£ç¡®è°ƒç”¨åç«¯æ¥å£ã€‚

- âœ… URL è·¯å¾„æ­£ç¡®
- âœ… è¯·æ±‚æ–¹æ³•æ­£ç¡®
- âœ… å‚æ•°æ ¼å¼æ­£ç¡®
- âœ… å“åº”å¤„ç†æ­£ç¡®
- âœ… é”™è¯¯å¤„ç†å®Œå–„

**å»ºè®®**ï¼šç°åœ¨å¯ä»¥å¯åŠ¨å‰åç«¯æœåŠ¡è¿›è¡Œå®é™…æµ‹è¯•äº†ï¼ğŸš€
