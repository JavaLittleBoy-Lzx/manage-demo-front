# ğŸ“Š åœè½¦ç®¡ç†ç³»ç»Ÿç»Ÿè®¡åŠŸèƒ½æ•´ç†æ–‡æ¡£

## ğŸ¯ æ¦‚è¿°
åŸºäºç°æœ‰çš„ä»ªè¡¨æ¿æ¶æ„ï¼Œå°†åŸæœ‰çš„é€šç”¨å›¾è¡¨æ›¿æ¢ä¸ºç¬¦åˆåœè½¦ç®¡ç†ç³»ç»Ÿå®é™…ä¸šåŠ¡çš„ç»Ÿè®¡åŠŸèƒ½ï¼Œä¸»è¦åŒ…æ‹¬ï¼šæ•°æ®æ¦‚è§ˆã€ä¸šåŠ¡åˆ†æã€äººå‘˜ç®¡ç†ã€æ”¾è¡Œè®°å½•å››ä¸ªæ¨¡å—ã€‚

---

## ğŸ”§ ä¿®æ”¹æ–¹æ¡ˆ

### 1. **å‰ç«¯APIæ¥å£å±‚ä¿®æ”¹** (`dashboard.js`)

#### 1.1 ä¿ç•™çš„ç°æœ‰æ¥å£
```javascript
// ä¿ç•™è¿™äº›é€šç”¨æ¥å£ï¼Œå¯èƒ½åœ¨å…¶ä»–ç»Ÿè®¡ä¸­ä½¿ç”¨
- getRealtimeOverview()           // å®æ—¶æ¦‚è§ˆ
- getTrafficTrend()              // è½¦æµé‡è¶‹åŠ¿ 
- getViolationTypeDistribution() // è¿è§„ç±»å‹åˆ†å¸ƒ
- getMonthTicketUsage()          // æœˆç¥¨ä½¿ç”¨ç‡
```

#### 1.2 æ–°å¢ä¸šåŠ¡ç‰¹å®šæ¥å£
```javascript
export const dashboardApi = {
  // ========== æ•°æ®æ¦‚è§ˆæ¨¡å— ==========
  // å„è½¦åœºé¢„çº¦æ•°é‡ç»Ÿè®¡ (åŸºäº vehicle_reservation)
  getParkAppointmentStats(days = 7) {
    return request({
      url: '/api/dashboard/park-appointment-stats',
      method: 'GET', 
      params: { days }
    });
  },

  // å„è½¦åœºè¿›åœºæ•°é‡ç»Ÿè®¡ (åŸºäº vehicle_reservation.enter_time)
  getParkEntryStats(days = 7) {
    return request({
      url: '/api/dashboard/park-entry-stats',
      method: 'GET',
      params: { days }
    });
  },

  // ä¸šä¸»æŒ‰å°åŒºç»Ÿè®¡ (åŸºäºç°æœ‰ owner è¡¨)
  getOwnerByCommunityStats() {
    return request({
      url: '/api/dashboard/owner-community-stats', 
      method: 'GET'
    });
  },

  // è½¦è¾†ç±»å‹ç»Ÿè®¡ (åŸºäºè½¦ç‰Œè§„å¾‹åˆ†æ)
  getVehicleTypeStats() {
    return request({
      url: '/api/dashboard/vehicle-type-stats',
      method: 'GET'
    });
  },

  // ========== ä¸šåŠ¡åˆ†ææ¨¡å— ==========
  // æœˆç¥¨æŒ‰åç§°ç»Ÿè®¡
  getMonthTicketByNameStats() {
    return request({
      url: '/api/dashboard/month-ticket-name-stats',
      method: 'GET'
    });
  },

  // æœˆç¥¨æŒ‰è½¦åœºç»Ÿè®¡  
  getMonthTicketByParkStats() {
    return request({
      url: '/api/dashboard/month-ticket-park-stats',
      method: 'GET' 
    });
  },

  // é»‘åå•æŒ‰è¿è§„ç±»å‹ç»Ÿè®¡
  getBlacklistByViolationStats() {
    return request({
      url: '/api/dashboard/blacklist-violation-stats',
      method: 'GET'
    });
  },

  // é»‘åå•æŒ‰è½¦åœºç»Ÿè®¡
  getBlacklistByParkStats() {
    return request({
      url: '/api/dashboard/blacklist-park-stats', 
      method: 'GET'
    });
  },

  // ========== äººå‘˜ç®¡ç†æ¨¡å— ==========
  // ç®¡å®¶æŒ‰å°åŒºç»Ÿè®¡
  getButlerByCommunityStats() {
    return request({
      url: '/api/dashboard/butler-community-stats',
      method: 'GET'
    });
  },

  // å·¡é€»å‘˜æŒ‰å°åŒºç»Ÿè®¡
  getPatrolByCommunityStats() {
    return request({
      url: '/api/dashboard/patrol-community-stats',
      method: 'GET'
    });
  },

  // é¢„çº¦å®¡æ‰¹çŠ¶æ€ç»Ÿè®¡ (åŸºäº appointment è¡¨)
  getAppointmentApprovalStats(days = 30) {
    return request({
      url: '/api/dashboard/appointment-approval-stats',
      method: 'GET',
      params: { days }
    });
  },

  // è¿è§„å¤„ç†ç»Ÿè®¡
  getViolationHandlingStats(days = 30) {
    return request({
      url: '/api/dashboard/violation-handling-stats',
      method: 'GET',
      params: { days }
    });
  },

  // ========== æ”¾è¡Œè®°å½•æ¨¡å— ==========
  // å¤–æ¥è½¦è¾†æ”¾è¡Œç»Ÿè®¡ (åŸºäº vehicle_reservation.reserve_flag)
  getVehicleReleaseStats(days = 7) {
    return request({
      url: '/api/dashboard/vehicle-release-stats',
      method: 'GET',
      params: { days }
    });
  },

  // é‡å¤æ”¾è¡Œè½¦è¾†ç»Ÿè®¡ (åŸºäº vehicle_reservation åˆ†ç»„ç»Ÿè®¡)
  getRepeatReleaseVehicleStats(days = 30) {
    return request({
      url: '/api/dashboard/repeat-release-stats', 
      method: 'GET',
      params: { days }
    });
  },

  // é¢„çº¦è½¬åŒ–ç‡ç»Ÿè®¡ (é¢„çº¦ -> å®é™…è¿›åœº)
  getAppointmentConversionStats(days = 30) {
    return request({
      url: '/api/dashboard/appointment-conversion-stats',
      method: 'GET',
      params: { days }
    });
  },

  // å°åŒºæ´»è·ƒåº¦æ’è¡Œ (ä»…åŸºäº appointment è¡¨)
  getCommunityActivityRanking(days = 7) {
    return request({
      url: '/api/dashboard/community-activity-ranking',
      method: 'GET', 
      params: { days }
    });
  }
};
```

---

### 2. **å‰ç«¯é¡µé¢å±‚ä¿®æ”¹** (`EmptyPer.vue`)

#### 2.1 Tabé…ç½®ä¿®æ”¹
```javascript
// æ›¿æ¢åŸæœ‰çš„ chartTabs
const chartTabs = ref([
  { key: 'overview', label: 'æ•°æ®æ¦‚è§ˆ', icon: Car },      // æ›¿æ¢ trends
  { key: 'business', label: 'ä¸šåŠ¡åˆ†æ', icon: Tickets },   // æ›¿æ¢ comparison  
  { key: 'staff', label: 'äººå‘˜ç®¡ç†', icon: User },        // æ›¿æ¢ timeAnalysis
  { key: 'release', label: 'æ”¾è¡Œè®°å½•', icon: TrendCharts }, // æ›¿æ¢ monitoring
  { key: 'activities', label: 'ç³»ç»Ÿæ´»åŠ¨', icon: InfoFilled } // ä¿ç•™
]);
```

#### 2.2 å›¾è¡¨å®¹å™¨ä¿®æ”¹
```vue
<!-- Tab 1: æ•°æ®æ¦‚è§ˆ -->
<div v-show="activeTab === 'overview'" class="charts-grid">
  <!-- å„è½¦åœºé¢„çº¦æ•°é‡ç»Ÿè®¡ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><Car /></el-icon>
        å„è½¦åœºé¢„çº¦æ•°é‡ç»Ÿè®¡
      </h3>
      <div class="chart-controls">
        <el-radio-group v-model="appointmentStatsDays" size="small" @change="loadParkAppointmentStats">
          <el-radio-button :value="7">è¿‘7å¤©</el-radio-button>
          <el-radio-button :value="30">è¿‘30å¤©</el-radio-button>
        </el-radio-group>
      </div>
    </div>
    <div ref="parkAppointmentChart" class="chart-content" data-chart="parkAppointment"></div>
  </div>

  <!-- å„è½¦åœºè¿›åœºæ•°é‡ç»Ÿè®¡ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><ArrowRight /></el-icon>
        å„è½¦åœºè¿›åœºæ•°é‡ç»Ÿè®¡
      </h3>
      <div class="chart-controls">
        <el-radio-group v-model="entryStatsDays" size="small" @change="loadParkEntryStats">
          <el-radio-button :value="7">è¿‘7å¤©</el-radio-button>
          <el-radio-button :value="30">è¿‘30å¤©</el-radio-button>
        </el-radio-group>
      </div>
    </div>
    <div ref="parkEntryChart" class="chart-content" data-chart="parkEntry"></div>
  </div>

  <!-- ä¸šä¸»æŒ‰å°åŒºåˆ†å¸ƒ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><User /></el-icon>
        ä¸šä¸»æŒ‰å°åŒºåˆ†å¸ƒ
      </h3>
    </div>
    <div ref="ownerCommunityChart" class="chart-content" data-chart="ownerCommunity"></div>
  </div>

  <!-- è½¦è¾†ç±»å‹ç»Ÿè®¡ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><Car /></el-icon>
        è½¦è¾†ç±»å‹ç»Ÿè®¡
      </h3>
    </div>
    <div ref="vehicleTypeChart" class="chart-content" data-chart="vehicleType"></div>
  </div>
</div>

<!-- Tab 2: ä¸šåŠ¡åˆ†æ -->
<div v-show="activeTab === 'business'" class="charts-grid">
  <!-- æœˆç¥¨æŒ‰åç§°ç»Ÿè®¡ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><Tickets /></el-icon>
        æœˆç¥¨æŒ‰åç§°ç»Ÿè®¡
      </h3>
    </div>
    <div ref="monthTicketNameChart" class="chart-content" data-chart="monthTicketName"></div>
  </div>

  <!-- æœˆç¥¨æŒ‰è½¦åœºç»Ÿè®¡ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><Tickets /></el-icon>
        æœˆç¥¨æŒ‰è½¦åœºç»Ÿè®¡
      </h3>
    </div>
    <div ref="monthTicketParkChart" class="chart-content" data-chart="monthTicketPark"></div>
  </div>

  <!-- é»‘åå•æŒ‰è¿è§„ç±»å‹ç»Ÿè®¡ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><WarningFilled /></el-icon>
        é»‘åå•æŒ‰è¿è§„ç±»å‹ç»Ÿè®¡
      </h3>
    </div>
    <div ref="blacklistViolationChart" class="chart-content" data-chart="blacklistViolation"></div>
  </div>

  <!-- é»‘åå•æŒ‰è½¦åœºç»Ÿè®¡ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><WarningFilled /></el-icon>
        é»‘åå•æŒ‰è½¦åœºç»Ÿè®¡
      </h3>
    </div>
    <div ref="blacklistParkChart" class="chart-content" data-chart="blacklistPark"></div>
  </div>
</div>

<!-- Tab 3: äººå‘˜ç®¡ç† -->
<div v-show="activeTab === 'staff'" class="charts-grid">
  <!-- ç®¡å®¶æŒ‰å°åŒºç»Ÿè®¡ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><User /></el-icon>
        ç®¡å®¶æŒ‰å°åŒºç»Ÿè®¡
      </h3>
    </div>
    <div ref="butlerCommunityChart" class="chart-content" data-chart="butlerCommunity"></div>
  </div>

  <!-- å·¡é€»å‘˜æŒ‰å°åŒºç»Ÿè®¡ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><User /></el-icon>
        å·¡é€»å‘˜æŒ‰å°åŒºç»Ÿè®¡
      </h3>
    </div>
    <div ref="patrolCommunityChart" class="chart-content" data-chart="patrolCommunity"></div>
  </div>

  <!-- é¢„çº¦å®¡æ‰¹çŠ¶æ€ç»Ÿè®¡ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><Check /></el-icon>
        é¢„çº¦å®¡æ‰¹çŠ¶æ€ç»Ÿè®¡
      </h3>
    </div>
    <div ref="appointmentApprovalChart" class="chart-content" data-chart="appointmentApproval"></div>
  </div>

  <!-- è¿è§„å¤„ç†ç»Ÿè®¡ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><Warning /></el-icon>
        è¿è§„å¤„ç†ç»Ÿè®¡
      </h3>
    </div>
    <div ref="violationHandlingChart" class="chart-content" data-chart="violationHandling"></div>
  </div>
</div>

<!-- Tab 4: æ”¾è¡Œè®°å½• -->
<div v-show="activeTab === 'release'" class="charts-grid">
  <!-- å¤–æ¥è½¦è¾†æ”¾è¡Œè¶‹åŠ¿ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><TrendCharts /></el-icon>
        å¤–æ¥è½¦è¾†æ”¾è¡Œè¶‹åŠ¿
      </h3>
      <div class="chart-controls">
        <el-radio-group v-model="releaseStatsDays" size="small" @change="loadVehicleReleaseStats">
          <el-radio-button :value="7">è¿‘7å¤©</el-radio-button>
          <el-radio-button :value="30">è¿‘30å¤©</el-radio-button>
        </el-radio-group>
      </div>
    </div>
    <div ref="vehicleReleaseChart" class="chart-content" data-chart="vehicleRelease"></div>
  </div>

  <!-- é‡å¤æ”¾è¡Œè½¦è¾†Top10 -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><ArrowRight /></el-icon>
        é‡å¤æ”¾è¡Œè½¦è¾†Top10
      </h3>
    </div>
    <div ref="repeatReleaseChart" class="chart-content" data-chart="repeatRelease"></div>
  </div>

  <!-- é¢„çº¦è½¬åŒ–ç‡ç»Ÿè®¡ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><TrendCharts /></el-icon>
        é¢„çº¦è½¬åŒ–ç‡ç»Ÿè®¡
      </h3>
    </div>
    <div ref="appointmentConversionChart" class="chart-content" data-chart="appointmentConversion"></div>
  </div>

  <!-- å°åŒºæ´»è·ƒåº¦æ’è¡Œ -->
  <div class="chart-container">
    <div class="chart-header">
      <h3 class="chart-title">
        <el-icon><Location /></el-icon>
        å°åŒºæ´»è·ƒåº¦æ’è¡Œ
      </h3>
    </div>
    <div ref="communityActivityChart" class="chart-content" data-chart="communityActivity"></div>
  </div>
</div>
```

#### 2.3 æ•°æ®åŠ è½½å‡½æ•°ä¿®æ”¹
```javascript
// æ–°å¢æ•°æ®åŠ è½½å‡½æ•°
const loadParkAppointmentStats = async () => {
  try {
    chartsLoading.value = true;
    const response = await dashboardApi.getParkAppointmentStats(appointmentStatsDays.value);
    // å¤„ç†æ•°æ®å¹¶æ¸²æŸ“å›¾è¡¨
    // ...
  } catch (error) {
    // é”™è¯¯å¤„ç†
  } finally {
    chartsLoading.value = false;
  }
};

// ç±»ä¼¼åœ°æ·»åŠ å…¶ä»–å›¾è¡¨åŠ è½½å‡½æ•°...
```

---

### 3. **åç«¯æ§åˆ¶å™¨ä¿®æ”¹** (`DashboardController.java`)

#### 3.1 æ–°å¢æ¥å£æ–¹æ³•
```java
@RestController
@RequestMapping("/api/dashboard")
public class DashboardController {

    // ========== æ•°æ®æ¦‚è§ˆæ¨¡å— ==========
    
    @ApiOperation("å„è½¦åœºé¢„çº¦æ•°é‡ç»Ÿè®¡")
    @GetMapping("/park-appointment-stats")
    public Result<List<ParkAppointmentStatsDTO>> getParkAppointmentStats(
            @ApiParam(value = "å¤©æ•°", defaultValue = "7") @RequestParam(defaultValue = "7") Integer days) {
        try {
            List<ParkAppointmentStatsDTO> stats = dashboardService.getParkAppointmentStats(days);
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–è½¦åœºé¢„çº¦ç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–è½¦åœºé¢„çº¦ç»Ÿè®¡å¤±è´¥");
        }
    }

    @ApiOperation("å„è½¦åœºè¿›åœºæ•°é‡ç»Ÿè®¡") 
    @GetMapping("/park-entry-stats")
    public Result<List<ParkEntryStatsDTO>> getParkEntryStats(
            @ApiParam(value = "å¤©æ•°", defaultValue = "7") @RequestParam(defaultValue = "7") Integer days) {
        try {
            List<ParkEntryStatsDTO> stats = dashboardService.getParkEntryStats(days);
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–è½¦åœºè¿›åœºç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–è½¦åœºè¿›åœºç»Ÿè®¡å¤±è´¥");
        }
    }

    @ApiOperation("ä¸šä¸»æŒ‰å°åŒºç»Ÿè®¡")
    @GetMapping("/owner-community-stats") 
    public Result<List<OwnerCommunityStatsDTO>> getOwnerByCommunityStats() {
        try {
            List<OwnerCommunityStatsDTO> stats = dashboardService.getOwnerByCommunityStats();
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–ä¸šä¸»å°åŒºç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–ä¸šä¸»å°åŒºç»Ÿè®¡å¤±è´¥");
        }
    }

    @ApiOperation("è½¦è¾†ç±»å‹ç»Ÿè®¡")
    @GetMapping("/vehicle-type-stats")
    public Result<List<VehicleTypeStatsDTO>> getVehicleTypeStats() {
        try {
            List<VehicleTypeStatsDTO> stats = dashboardService.getVehicleTypeStats();
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–è½¦è¾†ç±»å‹ç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–è½¦è¾†ç±»å‹ç»Ÿè®¡å¤±è´¥");
        }
    }

    // ========== ä¸šåŠ¡åˆ†ææ¨¡å— ==========
    
    @ApiOperation("æœˆç¥¨æŒ‰åç§°ç»Ÿè®¡")
    @GetMapping("/month-ticket-name-stats")
    public Result<List<MonthTicketNameStatsDTO>> getMonthTicketByNameStats() {
        try {
            List<MonthTicketNameStatsDTO> stats = dashboardService.getMonthTicketByNameStats();
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–æœˆç¥¨åç§°ç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–æœˆç¥¨åç§°ç»Ÿè®¡å¤±è´¥");
        }
    }

    @ApiOperation("æœˆç¥¨æŒ‰è½¦åœºç»Ÿè®¡")
    @GetMapping("/month-ticket-park-stats")
    public Result<List<MonthTicketParkStatsDTO>> getMonthTicketByParkStats() {
        try {
            List<MonthTicketParkStatsDTO> stats = dashboardService.getMonthTicketByParkStats();
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–æœˆç¥¨è½¦åœºç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–æœˆç¥¨è½¦åœºç»Ÿè®¡å¤±è´¥");
        }
    }

    @ApiOperation("é»‘åå•æŒ‰è¿è§„ç±»å‹ç»Ÿè®¡")
    @GetMapping("/blacklist-violation-stats") 
    public Result<List<BlacklistViolationStatsDTO>> getBlacklistByViolationStats() {
        try {
            List<BlacklistViolationStatsDTO> stats = dashboardService.getBlacklistByViolationStats();
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–é»‘åå•è¿è§„ç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–é»‘åå•è¿è§„ç»Ÿè®¡å¤±è´¥");
        }
    }

    @ApiOperation("é»‘åå•æŒ‰è½¦åœºç»Ÿè®¡")
    @GetMapping("/blacklist-park-stats")
    public Result<List<BlacklistParkStatsDTO>> getBlacklistByParkStats() {
        try {
            List<BlacklistParkStatsDTO> stats = dashboardService.getBlacklistByParkStats();
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–é»‘åå•è½¦åœºç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–é»‘åå•è½¦åœºç»Ÿè®¡å¤±è´¥");
        }
    }

    // ========== äººå‘˜ç®¡ç†æ¨¡å— ==========
    
    @ApiOperation("ç®¡å®¶æŒ‰å°åŒºç»Ÿè®¡")
    @GetMapping("/butler-community-stats")
    public Result<List<ButlerCommunityStatsDTO>> getButlerByCommunityStats() {
        try {
            List<ButlerCommunityStatsDTO> stats = dashboardService.getButlerByCommunityStats();
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–ç®¡å®¶å°åŒºç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–ç®¡å®¶å°åŒºç»Ÿè®¡å¤±è´¥");
        }
    }

    @ApiOperation("å·¡é€»å‘˜æŒ‰å°åŒºç»Ÿè®¡")
    @GetMapping("/patrol-community-stats")
    public Result<List<PatrolCommunityStatsDTO>> getPatrolByCommunityStats() {
        try {
            List<PatrolCommunityStatsDTO> stats = dashboardService.getPatrolByCommunityStats();
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–å·¡é€»å‘˜å°åŒºç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–å·¡é€»å‘˜å°åŒºç»Ÿè®¡å¤±è´¥");
        }
    }

    @ApiOperation("é¢„çº¦å®¡æ‰¹çŠ¶æ€ç»Ÿè®¡") 
    @GetMapping("/appointment-approval-stats")
    public Result<List<AppointmentApprovalStatsDTO>> getAppointmentApprovalStats(
            @ApiParam(value = "å¤©æ•°", defaultValue = "30") @RequestParam(defaultValue = "30") Integer days) {
        try {
            List<AppointmentApprovalStatsDTO> stats = dashboardService.getAppointmentApprovalStats(days);
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–é¢„çº¦å®¡æ‰¹ç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–é¢„çº¦å®¡æ‰¹ç»Ÿè®¡å¤±è´¥");
        }
    }

    @ApiOperation("è¿è§„å¤„ç†ç»Ÿè®¡")
    @GetMapping("/violation-handling-stats")
    public Result<List<ViolationHandlingStatsDTO>> getViolationHandlingStats(
            @ApiParam(value = "å¤©æ•°", defaultValue = "30") @RequestParam(defaultValue = "30") Integer days) {
        try {
            List<ViolationHandlingStatsDTO> stats = dashboardService.getViolationHandlingStats(days);
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–è¿è§„å¤„ç†ç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–è¿è§„å¤„ç†ç»Ÿè®¡å¤±è´¥");
        }
    }

    // ========== æ”¾è¡Œè®°å½•æ¨¡å— ==========
    
    @ApiOperation("å¤–æ¥è½¦è¾†æ”¾è¡Œç»Ÿè®¡")
    @GetMapping("/vehicle-release-stats")
    public Result<List<VehicleReleaseStatsDTO>> getVehicleReleaseStats(
            @ApiParam(value = "å¤©æ•°", defaultValue = "7") @RequestParam(defaultValue = "7") Integer days) {
        try {
            List<VehicleReleaseStatsDTO> stats = dashboardService.getVehicleReleaseStats(days);
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–è½¦è¾†æ”¾è¡Œç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–è½¦è¾†æ”¾è¡Œç»Ÿè®¡å¤±è´¥");
        }
    }

    @ApiOperation("é‡å¤æ”¾è¡Œè½¦è¾†ç»Ÿè®¡") 
    @GetMapping("/repeat-release-stats")
    public Result<List<RepeatReleaseStatsDTO>> getRepeatReleaseVehicleStats(
            @ApiParam(value = "å¤©æ•°", defaultValue = "30") @RequestParam(defaultValue = "30") Integer days) {
        try {
            List<RepeatReleaseStatsDTO> stats = dashboardService.getRepeatReleaseVehicleStats(days);
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–é‡å¤æ”¾è¡Œç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–é‡å¤æ”¾è¡Œç»Ÿè®¡å¤±è´¥");
        }
    }

    @ApiOperation("é¢„çº¦è½¬åŒ–ç‡ç»Ÿè®¡")
    @GetMapping("/appointment-conversion-stats")
    public Result<List<AppointmentConversionStatsDTO>> getAppointmentConversionStats(
            @ApiParam(value = "å¤©æ•°", defaultValue = "30") @RequestParam(defaultValue = "30") Integer days) {
        try {
            List<AppointmentConversionStatsDTO> stats = dashboardService.getAppointmentConversionStats(days);
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–é¢„çº¦è½¬åŒ–ç‡ç»Ÿè®¡å¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–é¢„çº¦è½¬åŒ–ç‡ç»Ÿè®¡å¤±è´¥");
        }
    }

    @ApiOperation("å°åŒºæ´»è·ƒåº¦æ’è¡Œ")
    @GetMapping("/community-activity-ranking")
    public Result<List<CommunityActivityRankingDTO>> getCommunityActivityRanking(
            @ApiParam(value = "å¤©æ•°", defaultValue = "7") @RequestParam(defaultValue = "7") Integer days) {
        try {
            List<CommunityActivityRankingDTO> stats = dashboardService.getCommunityActivityRanking(days);
            return Result.success(stats);
        } catch (Exception e) {
            log.error("è·å–å°åŒºæ´»è·ƒåº¦æ’è¡Œå¤±è´¥: {}", e.getMessage(), e);
            return Result.error("è·å–å°åŒºæ´»è·ƒåº¦æ’è¡Œå¤±è´¥");
        }
    }
}
```

---

### 4. **åç«¯Serviceå®ç°** (`DashboardService.java`)

#### 4.1 æ ¸å¿ƒSQLå®ç°ç¤ºä¾‹
```java
@Service
public class DashboardServiceImpl implements DashboardService {

    @Autowired
    private VehicleReservationMapper vehicleReservationMapper;
    
    @Autowired  
    private AppointmentMapper appointmentMapper;

    // å„è½¦åœºé¢„çº¦æ•°é‡ç»Ÿè®¡
    @Override
    public List<ParkAppointmentStatsDTO> getParkAppointmentStats(Integer days) {
        String sql = """
            SELECT 
                yard_name as parkName,
                COUNT(*) as appointmentCount,
                DATE(appointment_time) as appointmentDate
            FROM vehicle_reservation 
            WHERE deleted = 0 
                AND appointment_time >= DATE_SUB(NOW(), INTERVAL ? DAY)
                AND appointment_time IS NOT NULL
            GROUP BY yard_name, DATE(appointment_time)
            ORDER BY appointmentDate DESC, appointmentCount DESC
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // å„è½¦åœºè¿›åœºæ•°é‡ç»Ÿè®¡  
    @Override
    public List<ParkEntryStatsDTO> getParkEntryStats(Integer days) {
        String sql = """
            SELECT 
                yard_name as parkName,
                COUNT(*) as entryCount,
                DATE(STR_TO_DATE(enter_time, '%Y-%m-%d %H:%i:%s')) as entryDate
            FROM vehicle_reservation 
            WHERE deleted = 0 
                AND enter_time IS NOT NULL 
                AND enter_time != ''
                AND STR_TO_DATE(enter_time, '%Y-%m-%d %H:%i:%s') >= DATE_SUB(NOW(), INTERVAL ? DAY)
            GROUP BY yard_name, DATE(STR_TO_DATE(enter_time, '%Y-%m-%d %H:%i:%s'))
            ORDER BY entryDate DESC, entryCount DESC
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // å¤–æ¥è½¦è¾†æ”¾è¡Œç»Ÿè®¡
    @Override
    public List<VehicleReleaseStatsDTO> getVehicleReleaseStats(Integer days) {
        String sql = """
            SELECT 
                yard_name as parkName,
                COUNT(*) as releaseCount,
                DATE(STR_TO_DATE(reserve_time, '%Y-%m-%d %H:%i:%s')) as releaseDate
            FROM vehicle_reservation 
            WHERE deleted = 0 
                AND reserve_flag = 1  
                AND reserve_time IS NOT NULL 
                AND reserve_time != ''
                AND STR_TO_DATE(reserve_time, '%Y-%m-%d %H:%i:%s') >= DATE_SUB(NOW(), INTERVAL ? DAY)
            GROUP BY yard_name, DATE(STR_TO_DATE(reserve_time, '%Y-%m-%d %H:%i:%s'))
            ORDER BY releaseDate DESC, releaseCount DESC
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // é‡å¤æ”¾è¡Œè½¦è¾†ç»Ÿè®¡
    @Override
    public List<RepeatReleaseStatsDTO> getRepeatReleaseVehicleStats(Integer days) {
        String sql = """
            SELECT 
                plate_number as plateNumber,
                COUNT(*) as releaseCount,
                GROUP_CONCAT(DISTINCT yard_name) as parkNames,
                MAX(STR_TO_DATE(reserve_time, '%Y-%m-%d %H:%i:%s')) as lastReleaseTime
            FROM vehicle_reservation 
            WHERE deleted = 0 
                AND reserve_flag = 1  
                AND reserve_time IS NOT NULL 
                AND reserve_time != ''
                AND STR_TO_DATE(reserve_time, '%Y-%m-%d %H:%i:%s') >= DATE_SUB(NOW(), INTERVAL ? DAY)
            GROUP BY plate_number
            HAVING releaseCount > 1
            ORDER BY releaseCount DESC, lastReleaseTime DESC
            LIMIT 10
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // å°åŒºæ´»è·ƒåº¦æ’è¡Œ (ä»…åŸºäºappointmentè¡¨)
    @Override 
    public List<CommunityActivityRankingDTO> getCommunityActivityRanking(Integer days) {
        String sql = """
            SELECT 
                community,
                COUNT(*) as totalAppointments,
                COUNT(CASE WHEN auditstatus = 'å·²é€šè¿‡' THEN 1 END) as approvedCount,
                COUNT(CASE WHEN arrivedate IS NOT NULL AND arrivedate != '' THEN 1 END) as actualVisitCount,
                COUNT(CASE WHEN recorddate >= DATE_SUB(NOW(), INTERVAL ? DAY) THEN 1 END) as recentAppointments
            FROM appointment 
            WHERE community IS NOT NULL 
                AND community != ''
            GROUP BY community
            ORDER BY 
                recentAppointments DESC,
                approvedCount DESC,
                totalAppointments DESC
            LIMIT 20
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // ä¸šä¸»æŒ‰å°åŒºç»Ÿè®¡
    @Override
    public List<OwnerCommunityStatsDTO> getOwnerByCommunityStats() {
        String sql = """
            SELECT 
                community as communityName,
                COUNT(DISTINCT owner_id) as ownerCount,
                COUNT(*) as vehicleCount
            FROM owner_info 
            WHERE deleted = 0 
                AND community IS NOT NULL 
                AND community != ''
            GROUP BY community
            ORDER BY ownerCount DESC, vehicleCount DESC
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // è½¦è¾†ç±»å‹ç»Ÿè®¡
    @Override
    public List<VehicleTypeStatsDTO> getVehicleTypeStats() {
        String sql = """
            SELECT 
                CASE 
                    WHEN plate_number REGEXP '^[0-9A-Z]{2}[A-Z][0-9A-Z][0-9]{4}[A-Z]$' THEN 'æ–°èƒ½æºè½¦'
                    WHEN plate_number REGEXP '^[0-9A-Z]{2}[A-Z][0-9]{5}$' THEN 'å°å‹è½¦'
                    WHEN plate_number REGEXP '^[0-9A-Z]{2}[A-Z][0-9]{6}$' THEN 'å¤§å‹è½¦'
                    ELSE 'å…¶ä»–'
                END as vehicleType,
                COUNT(*) as count
            FROM vehicle_reservation 
            WHERE deleted = 0 
                AND plate_number IS NOT NULL 
                AND plate_number != ''
            GROUP BY vehicleType
            ORDER BY count DESC
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // æœˆç¥¨æŒ‰åç§°ç»Ÿè®¡
    @Override
    public List<MonthTicketNameStatsDTO> getMonthTicketByNameStats() {
        String sql = """
            SELECT 
                ticket_name as ticketName,
                COUNT(*) as count,
                COUNT(CASE WHEN status = 'æœ‰æ•ˆ' THEN 1 END) as activeCount
            FROM month_ticket 
            WHERE deleted = 0
            GROUP BY ticket_name
            ORDER BY count DESC
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // æœˆç¥¨æŒ‰è½¦åœºç»Ÿè®¡
    @Override
    public List<MonthTicketParkStatsDTO> getMonthTicketByParkStats() {
        String sql = """
            SELECT 
                park_name as parkName,
                COUNT(*) as count,
                COUNT(CASE WHEN status = 'æœ‰æ•ˆ' THEN 1 END) as activeCount
            FROM month_ticket 
            WHERE deleted = 0
            GROUP BY park_name
            ORDER BY count DESC
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // é»‘åå•æŒ‰è¿è§„ç±»å‹ç»Ÿè®¡
    @Override
    public List<BlacklistViolationStatsDTO> getBlacklistByViolationStats() {
        String sql = """
            SELECT 
                violation_type as violationType,
                COUNT(*) as count
            FROM blacklist 
            WHERE deleted = 0
            GROUP BY violation_type
            ORDER BY count DESC
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // é»‘åå•æŒ‰è½¦åœºç»Ÿè®¡
    @Override
    public List<BlacklistParkStatsDTO> getBlacklistByParkStats() {
        String sql = """
            SELECT 
                park_name as parkName,
                COUNT(*) as count
            FROM blacklist 
            WHERE deleted = 0
            GROUP BY park_name
            ORDER BY count DESC
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // ç®¡å®¶æŒ‰å°åŒºç»Ÿè®¡
    @Override
    public List<ButlerCommunityStatsDTO> getButlerByCommunityStats() {
        String sql = """
            SELECT 
                community as communityName,
                COUNT(*) as butlerCount
            FROM butler 
            WHERE deleted = 0
            GROUP BY community
            ORDER BY butlerCount DESC
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // å·¡é€»å‘˜æŒ‰å°åŒºç»Ÿè®¡
    @Override
    public List<PatrolCommunityStatsDTO> getPatrolByCommunityStats() {
        String sql = """
            SELECT 
                community as communityName,
                COUNT(*) as patrolCount
            FROM patrol 
            WHERE deleted = 0
            GROUP BY community
            ORDER BY patrolCount DESC
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // é¢„çº¦å®¡æ‰¹çŠ¶æ€ç»Ÿè®¡
    @Override
    public List<AppointmentApprovalStatsDTO> getAppointmentApprovalStats(Integer days) {
        String sql = """
            SELECT 
                auditstatus as approvalStatus,
                COUNT(*) as count
            FROM appointment 
            WHERE recorddate >= DATE_SUB(NOW(), INTERVAL ? DAY)
            GROUP BY auditstatus
            ORDER BY count DESC
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // è¿è§„å¤„ç†ç»Ÿè®¡
    @Override
    public List<ViolationHandlingStatsDTO> getViolationHandlingStats(Integer days) {
        String sql = """
            SELECT 
                handle_status as handleStatus,
                COUNT(*) as count
            FROM violation_record 
            WHERE created_time >= DATE_SUB(NOW(), INTERVAL ? DAY)
                AND deleted = 0
            GROUP BY handle_status
            ORDER BY count DESC
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }

    // é¢„çº¦è½¬åŒ–ç‡ç»Ÿè®¡
    @Override
    public List<AppointmentConversionStatsDTO> getAppointmentConversionStats(Integer days) {
        String sql = """
            SELECT 
                DATE(appointment_time) as appointmentDate,
                COUNT(*) as totalAppointments,
                COUNT(CASE WHEN enter_time IS NOT NULL AND enter_time != '' THEN 1 END) as actualEntries,
                ROUND(COUNT(CASE WHEN enter_time IS NOT NULL AND enter_time != '' THEN 1 END) * 100.0 / COUNT(*), 2) as conversionRate
            FROM vehicle_reservation 
            WHERE deleted = 0 
                AND appointment_time >= DATE_SUB(NOW(), INTERVAL ? DAY)
                AND appointment_time IS NOT NULL
            GROUP BY DATE(appointment_time)
            ORDER BY appointmentDate DESC
            """;
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å°è£…è¿”å›
    }
}
```

---

### 5. **DTOæ•°æ®ä¼ è¾“å¯¹è±¡å®šä¹‰**

#### 5.1 æ•°æ®æ¦‚è§ˆæ¨¡å—DTO
```java
// è½¦åœºé¢„çº¦ç»Ÿè®¡DTO
@Data
public class ParkAppointmentStatsDTO {
    private String parkName;           // è½¦åœºåç§°
    private Integer appointmentCount;  // é¢„çº¦æ•°é‡  
    private LocalDate appointmentDate; // é¢„çº¦æ—¥æœŸ
}

// è½¦åœºè¿›åœºç»Ÿè®¡DTO
@Data
public class ParkEntryStatsDTO {
    private String parkName;      // è½¦åœºåç§°
    private Integer entryCount;   // è¿›åœºæ•°é‡
    private LocalDate entryDate;  // è¿›åœºæ—¥æœŸ
}

// ä¸šä¸»å°åŒºç»Ÿè®¡DTO
@Data
public class OwnerCommunityStatsDTO {
    private String communityName; // å°åŒºåç§°
    private Integer ownerCount;   // ä¸šä¸»æ•°é‡
    private Integer vehicleCount; // è½¦è¾†æ•°é‡
}

// è½¦è¾†ç±»å‹ç»Ÿè®¡DTO
@Data  
public class VehicleTypeStatsDTO {
    private String vehicleType;  // è½¦è¾†ç±»å‹ (å°å‹è½¦/å¤§å‹è½¦/æ–°èƒ½æº)
    private Integer count;       // æ•°é‡
    private Double percentage;   // å æ¯”
}
```

#### 5.2 ä¸šåŠ¡åˆ†ææ¨¡å—DTO
```java
// æœˆç¥¨åç§°ç»Ÿè®¡DTO
@Data
public class MonthTicketNameStatsDTO {
    private String ticketName;   // æœˆç¥¨åç§°
    private Integer count;       // æ€»æ•°é‡
    private Integer activeCount; // æœ‰æ•ˆæ•°é‡
}

// æœˆç¥¨è½¦åœºç»Ÿè®¡DTO
@Data
public class MonthTicketParkStatsDTO {
    private String parkName;     // è½¦åœºåç§°
    private Integer count;       // æ€»æ•°é‡
    private Integer activeCount; // æœ‰æ•ˆæ•°é‡
}

// é»‘åå•è¿è§„ç±»å‹ç»Ÿè®¡DTO
@Data
public class BlacklistViolationStatsDTO {
    private String violationType; // è¿è§„ç±»å‹
    private Integer count;        // æ•°é‡
}

// é»‘åå•è½¦åœºç»Ÿè®¡DTO
@Data
public class BlacklistParkStatsDTO {
    private String parkName; // è½¦åœºåç§°
    private Integer count;   // æ•°é‡
}
```

#### 5.3 äººå‘˜ç®¡ç†æ¨¡å—DTO
```java
// ç®¡å®¶å°åŒºç»Ÿè®¡DTO
@Data
public class ButlerCommunityStatsDTO {
    private String communityName; // å°åŒºåç§°
    private Integer butlerCount;  // ç®¡å®¶æ•°é‡
}

// å·¡é€»å‘˜å°åŒºç»Ÿè®¡DTO
@Data
public class PatrolCommunityStatsDTO {
    private String communityName; // å°åŒºåç§°
    private Integer patrolCount;  // å·¡é€»å‘˜æ•°é‡
}

// é¢„çº¦å®¡æ‰¹çŠ¶æ€ç»Ÿè®¡DTO
@Data
public class AppointmentApprovalStatsDTO {
    private String approvalStatus; // å®¡æ‰¹çŠ¶æ€
    private Integer count;         // æ•°é‡
}

// è¿è§„å¤„ç†ç»Ÿè®¡DTO
@Data
public class ViolationHandlingStatsDTO {
    private String handleStatus; // å¤„ç†çŠ¶æ€
    private Integer count;       // æ•°é‡
}
```

#### 5.4 æ”¾è¡Œè®°å½•æ¨¡å—DTO
```java
// è½¦è¾†æ”¾è¡Œç»Ÿè®¡DTO
@Data
public class VehicleReleaseStatsDTO {
    private String parkName;        // è½¦åœºåç§°
    private Integer releaseCount;   // æ”¾è¡Œæ•°é‡
    private LocalDate releaseDate;  // æ”¾è¡Œæ—¥æœŸ
}

// é‡å¤æ”¾è¡Œè½¦è¾†ç»Ÿè®¡DTO
@Data
public class RepeatReleaseStatsDTO {
    private String plateNumber;        // è½¦ç‰Œå·
    private Integer releaseCount;      // æ”¾è¡Œæ¬¡æ•°
    private String parkNames;          // æ¶‰åŠè½¦åœº
    private LocalDateTime lastReleaseTime; // æœ€åæ”¾è¡Œæ—¶é—´
}

// é¢„çº¦è½¬åŒ–ç‡ç»Ÿè®¡DTO
@Data
public class AppointmentConversionStatsDTO {
    private LocalDate appointmentDate;   // é¢„çº¦æ—¥æœŸ
    private Integer totalAppointments;   // æ€»é¢„çº¦æ•°
    private Integer actualEntries;       // å®é™…è¿›åœºæ•°
    private Double conversionRate;       // è½¬åŒ–ç‡
}

// å°åŒºæ´»è·ƒåº¦æ’è¡ŒDTO
@Data
public class CommunityActivityRankingDTO {
    private String community;          // å°åŒºåç§°
    private Integer totalAppointments;  // æ€»é¢„çº¦æ•°
    private Integer approvedCount;      // å·²æ‰¹å‡†æ•°
    private Integer actualVisitCount;   // å®é™…åˆ°è®¿æ•°
    private Integer recentAppointments; // è¿‘æœŸé¢„çº¦æ•°
    private Double activityScore;       // æ´»è·ƒåº¦è¯„åˆ†
}
```

---

### 6. **æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–å»ºè®®**

#### 6.1 vehicle_reservationè¡¨ç´¢å¼•
```sql
-- è½¦åœºåç§°ç´¢å¼•
CREATE INDEX idx_yard_name ON vehicle_reservation(yard_name);

-- é¢„çº¦æ—¶é—´ç´¢å¼•
CREATE INDEX idx_appointment_time ON vehicle_reservation(appointment_time);

-- è¿›åœºæ—¶é—´ç´¢å¼•ï¼ˆéœ€è¦å¤„ç†varcharç±»å‹ï¼‰
CREATE INDEX idx_enter_time ON vehicle_reservation(enter_time);

-- æ”¾è¡Œæ—¶é—´ç´¢å¼•
CREATE INDEX idx_reserve_time ON vehicle_reservation(reserve_time);

-- æ”¾è¡Œæ ‡å¿—ç´¢å¼•
CREATE INDEX idx_reserve_flag ON vehicle_reservation(reserve_flag);

-- è½¦ç‰Œå·ç´¢å¼•
CREATE INDEX idx_plate_number ON vehicle_reservation(plate_number);

-- å¤åˆç´¢å¼•
CREATE INDEX idx_yard_appointment ON vehicle_reservation(yard_name, appointment_time);
CREATE INDEX idx_yard_reserve ON vehicle_reservation(yard_name, reserve_flag, reserve_time);
```

#### 6.2 appointmentè¡¨ç´¢å¼•
```sql
-- å°åŒºåç§°ç´¢å¼•
CREATE INDEX idx_community ON appointment(community);

-- è®°å½•æ—¶é—´ç´¢å¼•
CREATE INDEX idx_recorddate ON appointment(recorddate);

-- å®¡æ‰¹çŠ¶æ€ç´¢å¼•
CREATE INDEX idx_auditstatus ON appointment(auditstatus);

-- å¤åˆç´¢å¼•
CREATE INDEX idx_community_recorddate ON appointment(community, recorddate);
```

#### 6.3 å…¶ä»–è¡¨ç´¢å¼•
```sql
-- owner_infoè¡¨
CREATE INDEX idx_owner_community ON owner_info(community);

-- month_ticketè¡¨
CREATE INDEX idx_ticket_name ON month_ticket(ticket_name);
CREATE INDEX idx_park_name ON month_ticket(park_name);

-- blacklistè¡¨
CREATE INDEX idx_violation_type ON blacklist(violation_type);
CREATE INDEX idx_blacklist_park ON blacklist(park_name);

-- butlerè¡¨
CREATE INDEX idx_butler_community ON butler(community);

-- patrolè¡¨
CREATE INDEX idx_patrol_community ON patrol(community);
```

---

### 7. **å®æ–½æ­¥éª¤å»ºè®®**

#### 7.1 ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ•°æ®ç»Ÿè®¡ï¼ˆ1-2å‘¨ï¼‰
1. **å®ç°æ•°æ®æ¦‚è§ˆæ¨¡å—çš„4ä¸ªç»Ÿè®¡åŠŸèƒ½**
   - å„è½¦åœºé¢„çº¦æ•°é‡ç»Ÿè®¡
   - å„è½¦åœºè¿›åœºæ•°é‡ç»Ÿè®¡  
   - ä¸šä¸»æŒ‰å°åŒºåˆ†å¸ƒ
   - è½¦è¾†ç±»å‹ç»Ÿè®¡

2. **é‡ç‚¹å…³æ³¨äº‹é¡¹**
   - `vehicle_reservation` è¡¨çš„æ•°æ®æŸ¥è¯¢ä¼˜åŒ–
   - `enter_time`ã€`reserve_time` å­—æ®µçš„å­—ç¬¦ä¸²æ—¶é—´æ ¼å¼å¤„ç†
   - æµ‹è¯•æ•°æ®æ­£ç¡®æ€§å’ŒæŸ¥è¯¢æ€§èƒ½

3. **é¢„æœŸæˆæœ**
   - å‰ç«¯æ˜¾ç¤ºåŸºç¡€ç»Ÿè®¡å›¾è¡¨
   - åç«¯APIæ¥å£æ­£å¸¸è¿è¡Œ
   - æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½è¾¾æ ‡

#### 7.2 ç¬¬äºŒé˜¶æ®µï¼šä¸šåŠ¡æ·±åº¦åˆ†æï¼ˆ2-3å‘¨ï¼‰
1. **å®ç°ä¸šåŠ¡åˆ†ææ¨¡å—çš„4ä¸ªç»Ÿè®¡åŠŸèƒ½**
   - æœˆç¥¨æŒ‰åç§°ç»Ÿè®¡
   - æœˆç¥¨æŒ‰è½¦åœºç»Ÿè®¡
   - é»‘åå•æŒ‰è¿è§„ç±»å‹ç»Ÿè®¡
   - é»‘åå•æŒ‰è½¦åœºç»Ÿè®¡

2. **æŠ€æœ¯é‡ç‚¹**
   - ä¼˜åŒ–å¤æ‚æŸ¥è¯¢çš„æ€§èƒ½
   - æ·»åŠ Redisç¼“å­˜æœºåˆ¶
   - å®ç°æ•°æ®åˆ†é¡µå¤„ç†

3. **é¢„æœŸæˆæœ**
   - å®Œå–„ä¸šåŠ¡æ•°æ®åˆ†æåŠŸèƒ½
   - ç¼“å­˜æœºåˆ¶æ­£å¸¸è¿è¡Œ
   - å¤§æ•°æ®é‡æŸ¥è¯¢å“åº”æ—¶é—´<3ç§’

#### 7.3 ç¬¬ä¸‰é˜¶æ®µï¼šç®¡ç†åŠŸèƒ½å®Œå–„ï¼ˆ2-3å‘¨ï¼‰
1. **å®ç°äººå‘˜ç®¡ç†å’Œæ”¾è¡Œè®°å½•æ¨¡å—**
   - ç®¡å®¶æŒ‰å°åŒºç»Ÿè®¡
   - å·¡é€»å‘˜æŒ‰å°åŒºç»Ÿè®¡
   - é¢„çº¦å®¡æ‰¹çŠ¶æ€ç»Ÿè®¡
   - è¿è§„å¤„ç†ç»Ÿè®¡
   - å¤–æ¥è½¦è¾†æ”¾è¡Œç»Ÿè®¡
   - é‡å¤æ”¾è¡Œè½¦è¾†ç»Ÿè®¡
   - é¢„çº¦è½¬åŒ–ç‡ç»Ÿè®¡
   - å°åŒºæ´»è·ƒåº¦æ’è¡Œ

2. **åŠŸèƒ½å®Œå–„**
   - å®Œå–„å‰ç«¯å›¾è¡¨å±•ç¤ºæ•ˆæœ
   - å¢åŠ æ•°æ®å¯¼å‡ºåŠŸèƒ½
   - æ·»åŠ ç»Ÿè®¡æŠ¥è¡¨åŠŸèƒ½

3. **é¢„æœŸæˆæœ**
   - æ‰€æœ‰ç»Ÿè®¡æ¨¡å—æ­£å¸¸è¿è¡Œ
   - ç”¨æˆ·ä½“éªŒè‰¯å¥½
   - æ•°æ®å¯¼å‡ºåŠŸèƒ½å®Œå–„

#### 7.4 ç¬¬å››é˜¶æ®µï¼šä¼˜åŒ–ä¸æ‰©å±•ï¼ˆ1-2å‘¨ï¼‰
1. **æ€§èƒ½ä¼˜åŒ–**
   - æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
   - å¢åŠ åˆ†å¸ƒå¼ç¼“å­˜
   - å®ç°å®šæ—¶ä»»åŠ¡é¢„è®¡ç®—

2. **åŠŸèƒ½æ‰©å±•**
   - æ·»åŠ å®æ—¶æ•°æ®æ¨é€
   - ç§»åŠ¨ç«¯é€‚é…
   - æ•°æ®é’»å–åŠŸèƒ½

3. **é¢„æœŸæˆæœ**
   - ç³»ç»Ÿå“åº”é€Ÿåº¦æå‡50%
   - æ”¯æŒå®æ—¶æ•°æ®æ›´æ–°
   - ç§»åŠ¨ç«¯æ­£å¸¸ä½¿ç”¨

---

### 8. **æ³¨æ„äº‹é¡¹**

#### 8.1 æ•°æ®åº“ä¼˜åŒ–
- **ç´¢å¼•ç­–ç•¥**: ä¸ºé«˜é¢‘æŸ¥è¯¢å­—æ®µæ·»åŠ åˆé€‚çš„ç´¢å¼•
- **åˆ†è¡¨ç­–ç•¥**: è€ƒè™‘å¯¹å†å²æ•°æ®è¿›è¡Œåˆ†è¡¨åˆ†åº“
- **æ•°æ®æ¸…ç†**: å®šæœŸæ¸…ç†æ— æ•ˆæ•°æ®ï¼Œä¿æŒè¡¨çš„æ€§èƒ½

#### 8.2 æ€§èƒ½è€ƒè™‘
- **åˆ†é¡µæŸ¥è¯¢**: å¤§æ•°æ®é‡æŸ¥è¯¢å¿…é¡»ä½¿ç”¨åˆ†é¡µ
- **ç¼“å­˜ç­–ç•¥**: ä½¿ç”¨Redisç¼“å­˜çƒ­ç‚¹æ•°æ®ï¼Œè®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´
- **å¼‚æ­¥å¤„ç†**: è€ƒè™‘å¼‚æ­¥ç”Ÿæˆå¤æ‚æŠ¥è¡¨

#### 8.3 æ•°æ®å‡†ç¡®æ€§
- **æ—¶é—´å¤„ç†**: æ­£ç¡®å¤„ç† `enter_time`ã€`reserve_time` çš„å­—ç¬¦ä¸²æ—¶é—´æ ¼å¼
- **é€»è¾‘åˆ é™¤**: ç¡®ä¿æ‰€æœ‰æŸ¥è¯¢éƒ½æ­£ç¡®å¤„ç† `deleted` å­—æ®µ
- **æ—¶é—´èŒƒå›´**: ç¡®ä¿ç»Ÿè®¡æ—¶é—´èŒƒå›´çš„å‡†ç¡®æ€§ï¼Œé¿å…æ—¶åŒºé—®é¢˜

#### 8.4 å®‰å…¨è€ƒè™‘
- **SQLæ³¨å…¥**: ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢SQLæ³¨å…¥
- **æƒé™æ§åˆ¶**: ç¡®ä¿ç»Ÿè®¡æ•°æ®çš„è®¿é—®æƒé™æ§åˆ¶
- **æ•°æ®è„±æ•**: æ•æ„Ÿæ•°æ®éœ€è¦è¿›è¡Œè„±æ•å¤„ç†

#### 8.5 ç›‘æ§å‘Šè­¦
- **æ€§èƒ½ç›‘æ§**: ç›‘æ§SQLæŸ¥è¯¢æ€§èƒ½ï¼Œè®¾ç½®æ…¢æŸ¥è¯¢å‘Šè­¦
- **æ•°æ®ç›‘æ§**: ç›‘æ§ç»Ÿè®¡æ•°æ®çš„å¼‚å¸¸å˜åŒ–
- **ç³»ç»Ÿç›‘æ§**: ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡ã€æ¥å£å“åº”æ—¶é—´ç­‰

---

### 9. **æŠ€æœ¯æ ˆè¯´æ˜**

#### 9.1 å‰ç«¯æŠ€æœ¯æ ˆ
- **Vue 3**: ä¸»æ¡†æ¶
- **Element Plus**: UIç»„ä»¶åº“
- **ECharts**: å›¾è¡¨åº“
- **Axios**: HTTPå®¢æˆ·ç«¯

#### 9.2 åç«¯æŠ€æœ¯æ ˆ
- **Spring Boot**: ä¸»æ¡†æ¶
- **MyBatis Plus**: ORMæ¡†æ¶
- **Redis**: ç¼“å­˜
- **MySQL**: æ•°æ®åº“

#### 9.3 éƒ¨ç½²æ¶æ„
- **Nginx**: åå‘ä»£ç†
- **Tomcat**: åº”ç”¨æœåŠ¡å™¨
- **Redis**: ç¼“å­˜æœåŠ¡
- **MySQL**: æ•°æ®åº“æœåŠ¡

---

### 10. **æµ‹è¯•æ–¹æ¡ˆ**

#### 10.1 å•å…ƒæµ‹è¯•
- æ¯ä¸ªServiceæ–¹æ³•ç¼–å†™å•å…ƒæµ‹è¯•
- è¦†ç›–ç‡è¦æ±‚è¾¾åˆ°80%ä»¥ä¸Š
- æµ‹è¯•è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æƒ…å†µ

#### 10.2 é›†æˆæµ‹è¯•
- æµ‹è¯•APIæ¥å£çš„å®Œæ•´æµç¨‹
- æµ‹è¯•æ•°æ®åº“è¿æ¥å’ŒæŸ¥è¯¢
- æµ‹è¯•ç¼“å­˜åŠŸèƒ½

#### 10.3 æ€§èƒ½æµ‹è¯•
- ä½¿ç”¨JMeterè¿›è¡Œæ¥å£å‹åŠ›æµ‹è¯•
- æµ‹è¯•å¤§æ•°æ®é‡æŸ¥è¯¢æ€§èƒ½
- æµ‹è¯•å¹¶å‘è®¿é—®èƒ½åŠ›

#### 10.4 ç”¨æˆ·éªŒæ”¶æµ‹è¯•
- ä¸šåŠ¡äººå‘˜å‚ä¸åŠŸèƒ½æµ‹è¯•
- éªŒè¯ç»Ÿè®¡æ•°æ®çš„å‡†ç¡®æ€§
- ç¡®ä¿ç”¨æˆ·ä½“éªŒæ»¡è¶³éœ€æ±‚

---

### 11. **é¡¹ç›®äº¤ä»˜ç‰©**

#### 11.1 ä»£ç äº¤ä»˜
- å‰ç«¯Vueç»„ä»¶ä»£ç 
- åç«¯JavaæœåŠ¡ä»£ç 
- æ•°æ®åº“è„šæœ¬æ–‡ä»¶
- é…ç½®æ–‡ä»¶

#### 11.2 æ–‡æ¡£äº¤ä»˜
- æŠ€æœ¯è®¾è®¡æ–‡æ¡£
- æ¥å£æ–‡æ¡£
- éƒ¨ç½²æ–‡æ¡£
- ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ

#### 11.3 æµ‹è¯•äº¤ä»˜
- å•å…ƒæµ‹è¯•ä»£ç 
- æµ‹è¯•ç”¨ä¾‹æ–‡æ¡£
- æµ‹è¯•æŠ¥å‘Š
- æ€§èƒ½æµ‹è¯•æŠ¥å‘Š

---

## ğŸ“ æ€»ç»“

æœ¬æ–‡æ¡£æä¾›äº†åœè½¦ç®¡ç†ç³»ç»Ÿç»Ÿè®¡åŠŸèƒ½çš„å®Œæ•´é‡æ„æ–¹æ¡ˆï¼Œå°†åŸæœ‰çš„é€šç”¨å›¾è¡¨æ›¿æ¢ä¸ºä¸šåŠ¡ç›¸å…³çš„ç»Ÿè®¡åŠŸèƒ½ã€‚é€šè¿‡åˆç†çš„æ¨¡å—åˆ’åˆ†ã€è¯¦ç»†çš„æ¥å£è®¾è®¡ã€ä¼˜åŒ–çš„æ•°æ®åº“æŸ¥è¯¢ï¼Œå¯ä»¥ä¸ºåœè½¦ç®¡ç†ç³»ç»Ÿæä¾›å¼ºå¤§çš„æ•°æ®åˆ†æèƒ½åŠ›ã€‚

é‡æ„åçš„ç³»ç»Ÿå°†æ›´åŠ è´´åˆå®é™…ä¸šåŠ¡éœ€æ±‚ï¼Œä¸ºç®¡ç†è€…æä¾›æœ‰ä»·å€¼çš„æ•°æ®æ´å¯Ÿï¼Œæ”¯æŒæ›´å¥½çš„ä¸šåŠ¡å†³ç­–ã€‚å»ºè®®æŒ‰ç…§åˆ†é˜¶æ®µå®æ–½çš„æ–¹å¼è¿›è¡Œå¼€å‘ï¼Œç¡®ä¿æ¯ä¸ªé˜¶æ®µéƒ½èƒ½äº¤ä»˜å¯ç”¨çš„åŠŸèƒ½ã€‚ 