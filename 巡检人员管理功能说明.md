# 巡检人员管理功能说明

## 功能概述

巡检人员管理模块是基于数据库表结构和后端 `ParkStaffAuthController` 接口开发的完整管理系统，用于管理停车场巡检人员的信息和权限。

## 功能特点

### 1. 完整的CRUD操作
- ✅ **新增人员**：支持创建新的巡检人员账户
- ✅ **编辑信息**：修改现有人员的基本信息
- ✅ **删除人员**：单个或批量删除人员记录
- ✅ **查看详情**：展示人员的完整信息

### 2. 高级搜索功能
- 用户名搜索
- 真实姓名搜索
- 车场名称筛选
- 状态筛选（正常/禁用）
- 可折叠的搜索面板

### 3. 状态管理
- 实时状态切换（正常/禁用）
- 状态变更记录到活动日志
- 禁用用户无法登录系统

### 4. 密码管理
- 重置密码功能
- 密码强度验证
- 确认密码匹配检查

### 5. 数据导出
- 支持导出Excel格式
- 可按搜索条件导出
- 文件名包含日期标识

### 6. 批量操作
- 批量选择人员
- 批量删除功能
- 操作确认提示

## 数据库字段对应

基于提供的数据库表结构，页面字段对应关系如下：

| 页面字段 | 数据库字段 | 类型 | 说明 |
|---------|-----------|------|------|
| ID | id | int | 主键ID，自增 |
| 用户名 | username | varchar(50) | 登录用户名，唯一 |
| 密码 | password | varchar(255) | 加密存储的密码 |
| 真实姓名 | real_name | varchar(50) | 员工真实姓名 |
| 手机号码 | phone | varchar(20) | 联系电话 |
| 邮箱 | email | varchar(100) | 电子邮箱 |
| 车场名称 | park_name | varchar(50) | 所属车场 |
| 职位 | position | varchar(50) | 工作职位 |
| 状态 | status | tinyint | 1=正常，0=禁用 |
| 最后登录时间 | last_login_time | datetime | 最近登录时间 |
| 最后登录IP | last_login_ip | varchar(45) | 最近登录IP地址 |
| 创建时间 | created_time | datetime | 记录创建时间 |
| 更新时间 | updated_time | datetime | 记录更新时间 |
| 创建人ID | created_by | int | 创建人员ID |
| 备注 | remark | text | 备注信息 |

## API接口说明

### 基础接口
- `GET /api/staff/list` - 获取人员列表（分页）
- `GET /api/staff/{id}` - 获取人员详情
- `POST /api/staff/add` - 新增人员
- `PUT /api/staff/update` - 更新人员信息
- `DELETE /api/staff/delete/{id}` - 删除人员
- `DELETE /api/staff/batch-delete` - 批量删除

### 专用接口
- `PUT /api/staff/status/{id}` - 更新人员状态
- `PUT /api/staff/reset-password/{id}` - 重置密码
- `GET /api/auth/check-username` - 检查用户名是否存在
- `GET /api/staff/export` - 导出人员数据

## 页面路由

- **路由路径**：`/admin/staffManagement`
- **路由名称**：`StaffManagement`
- **权限代码**：`16`
- **页面标题**：巡检人员管理

## 使用说明

### 1. 访问页面
在管理员权限下，通过左侧导航菜单 "巡检人员管理" 进入页面。

### 2. 搜索人员
1. 点击搜索条件面板
2. 输入搜索条件（用户名、真实姓名、车场名称等）
3. 选择状态筛选
4. 点击"搜索"按钮

### 3. 新增人员
1. 点击页面右上角"新增人员"按钮
2. 填写必要信息：
   - 用户名（必填，系统会检查唯一性）
   - 真实姓名（必填）
   - 密码和确认密码（必填）
   - 手机号码（可选，但建议填写）
   - 邮箱（可选）
   - 车场名称（必填）
   - 职位（从下拉菜单选择）
   - 状态（默认为正常）
   - 备注（可选）
3. 点击"创建"按钮保存

### 4. 编辑人员
1. 在人员列表中找到目标人员
2. 点击操作列的"编辑"按钮
3. 修改需要更新的信息（注意：用户名不可修改）
4. 点击"更新"按钮保存

### 5. 删除人员
**单个删除：**
1. 点击操作列的"更多"按钮
2. 选择"删除"选项
3. 确认删除操作

**批量删除：**
1. 勾选需要删除的人员（列表左侧复选框）
2. 页面底部会显示批量操作栏
3. 点击"批量删除"按钮
4. 确认删除操作

### 6. 状态管理
在状态列中直接点击开关按钮即可切换人员状态（正常/禁用）。

### 7. 重置密码
1. 点击操作列的"更多"按钮
2. 选择"重置密码"选项
3. 输入新密码和确认密码
4. 点击"确定"按钮

### 8. 查看详情
1. 点击操作列的"更多"按钮
2. 选择"查看详情"选项
3. 在弹出窗口中查看完整信息

### 9. 导出数据
点击页面右上角"导出数据"按钮，系统会根据当前搜索条件导出Excel文件。

## 技术实现

### 1. 前端技术栈
- **框架**：Vue 3 + Composition API
- **UI组件**：Element Plus
- **状态管理**：响应式数据
- **HTTP请求**：Axios
- **样式**：SCSS + 现代化设计

### 2. 组件特性
- 响应式设计，支持各种屏幕尺寸
- 现代化UI风格，符合管理系统设计规范
- 完整的表单验证
- 操作确认提示
- 加载状态指示
- 错误处理机制

### 3. 安全特性
- JWT Token认证
- 用户名唯一性检查
- 密码强度验证
- 操作权限控制
- 所有操作记录到活动日志

## 注意事项

1. **权限要求**：需要管理员权限才能访问此页面
2. **数据备份**：删除操作不可恢复，建议定期导出数据备份
3. **密码安全**：重置的密码应通知用户及时修改
4. **状态管理**：禁用的用户无法登录系统，请谨慎操作
5. **网络要求**：需要稳定的网络连接以确保数据同步

## 未来扩展

根据业务需求，可以考虑添加以下功能：
- 人员头像上传
- 工作排班管理
- 权限细分管理
- 短信/邮件通知
- 操作日志查看
- 数据统计报表
- 移动端适配

## 技术支持

如遇到问题，请检查：
1. 后端API服务是否正常运行
2. 数据库连接是否正常
3. 用户权限是否正确
4. 网络连接是否稳定

更多技术细节请参考代码注释和API文档。 