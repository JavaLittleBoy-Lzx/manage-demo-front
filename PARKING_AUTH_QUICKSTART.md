# 车场权限管理 - 快速开始指南

## 功能说明

用户可以被分配管理特定的车场，在系统的所有功能模块中，用户只能查看和统计其管理的车场数据，无法看到其他车场的信息。

## 前端已完成 ✅

前端所有功能已开发完成，包括：

1. ✅ 车场权限管理工具（`src/utils/parkAuth.js`）
2. ✅ 登录时存储管理车场信息
3. ✅ Dashboard数据自动过滤
4. ✅ 用户管理页面添加车场字段编辑
5. ✅ 完整的文档说明

## 后端待实现 ⚠️

### 第一步：数据库修改（5分钟）

在用户表中添加字段：

```sql
ALTER TABLE sys_user ADD COLUMN managed_parks VARCHAR(500) COMMENT '管理的车场列表（逗号分隔）';
```

### 第二步：实体类添加字段（2分钟）

在用户实体类中添加：

```java
private String managedParks; // 管理的车场列表（逗号分隔）
```

### 第三步：登录接口返回该字段（5分钟）

确保登录接口返回 `managedParks` 字段：

```json
{
  "userId": 10,
  "userName": "张三",
  "managedParks": "A区车场,B区车场"
}
```

### 第四步：用户管理接口支持该字段（5分钟）

- 新增/修改用户时保存 `managedParks`
- 查询用户时返回 `managedParks`

### 第五步：添加车场列表接口（10分钟）

创建或修改接口返回所有车场列表：

```
GET /parking/venue/listAll
```

### 完成！🎉

完成以上步骤后，车场权限功能即可使用。

## 快速测试

### 1. 创建测试用户

1. 以管理员身份登录
2. 进入"用户管理" → "新增"
3. 填写用户信息
4. 在"管理车场"中选择1-2个车场
5. 保存

### 2. 验证权限

1. 以测试用户登录
2. 查看Dashboard，确认只显示其管理的车场数据
3. 查看其他模块，确认数据被正确过滤

### 3. 测试管理员

1. 以管理员用户登录
2. 确认可以查看所有车场数据

## 权限规则速查

| 用户类型 | managedParks | 可见数据 |
|---------|-------------|---------|
| 管理员 | 任意值 | 所有车场 |
| 普通用户 | 空/NULL | 所有车场（兼容） |
| 普通用户 | ["A区","B区"] | 仅A区和B区 |

## 详细文档

- **前端功能说明**：[PARKING_AUTH_README.md](./PARKING_AUTH_README.md)
- **后端实现指南**：[PARKING_AUTH_BACKEND_GUIDE.md](./PARKING_AUTH_BACKEND_GUIDE.md)

## 需要帮助？

查看详细文档或联系开发团队。

